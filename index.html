<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Octobat API Documentation</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all_nosearch.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell","ruby"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="https://www.octobat.com/" id="nav-button" target="_blank">
      <span>
        <img src="images/logo_api.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="shell">curl</a>
              <a href="#" data-language-name="ruby">ruby</a>
        </div>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">curl</a>
                <a href="#" data-language-name="ruby">ruby</a>
          </div>
      </div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1><pre class="highlight ruby"><code><span class="c1"># Bundler: Add to your Gemfile</span>
<span class="n">gem</span> <span class="s2">"octobat"</span>
</code></pre><pre class="highlight plaintext"><code>API Endpoint
https://apiv2.octobat.com
</code></pre>
<p>The Octobat API is organized around REST. Our API is designed to have predictable, resource-oriented URLs and to use HTTP response codes to indicate API errors. We use built-in HTTP features, like HTTP verbs, which can be understood by off-the-shelf HTTP clients.</p>

<p>JSON will be returned in all responses from the API, including errors.</p>

<p>To make the Octobat API as secure as possible. Authentication is performed through HTTP Basic Auth. Credentials can be found on your Octobat developers menu, in the &ldquo;API Keys&rdquo; section.</p>
<h1 id='authentication'>Authentication</h1><pre class="highlight shell"><code><span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/customers <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># curl uses the -u flag to pass basic auth credentials</span>
<span class="c"># (adding a colon after your secret API key will prevent it</span>
<span class="c"># from asking you for a password).</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Example request</span>
<span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="c1"># Authentication is transparently handled for you</span>
<span class="c1"># in subsequent method calls.</span>
</code></pre>
<p>Authentication to the API occurs via HTTP Basic Auth. Provide your API secret key as the basic auth username. You do not need to provide a password.
All API requests must be made over HTTPS. Calls made over plain HTTP will fail. You must authenticate for all requests.
You can manage your API keys from your account. Your API keys carry many privileges, so be sure to keep them secret!</p>
<h1 id='errors'>Errors</h1><pre class="highlight plaintext"><code>HTTP status codes summary

200 OK - Everything worked as expected.

201 Created - Resource has been successfully created

202 Accepted - Request has been accepted, but requires asynchronous work to be fully performed

400 Bad Request - Request failed due to a combination of errors

401 Unauthorized - No valid API credentials provided.

402 Payment Required - Your request was in livemode while your account is not activated for live requests yet.

403 Forbidden - You are not authorized to access the requested item.

404 Not Found - The requested item doesn't exist.

406 Unacceptable - Your request format was not supported. Use JSON.

409 Conflict - The data you submitted is in conflict with existing data.

422 Unprocessable Entity - Often missing a required parameter.

429 Too Many Requests - You sent us too many API requests in a row. Please retry later.

500, 502, 503, 504 Server errors - something went wrong on Octobat's end.

</code></pre>
<p>Octobat uses conventional HTTP response codes to indicate success or failure of an API request. In general, codes in the 2xx range indicate success, codes in the 4xx range indicate an error that resulted from the provided information (e.g. a required parameter was missing, a charge failed, etc.), and codes in the 5xx range indicate an error with Octobat&rsquo;s servers.</p>
<h1 id='pagination'>Pagination</h1><pre class="highlight shell"><code><span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/customers?limit<span class="o">=</span>3 <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"object"</span>: <span class="s2">"list"</span>,
  <span class="s2">"has_more"</span>: <span class="nb">true</span>,
  <span class="s2">"has_before"</span>: <span class="nb">false</span>,
  <span class="s2">"total_count"</span>: 240,
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: <span class="s2">"oc_cu_1421878635hksc26e4de79"</span>,
      <span class="s2">"object"</span> : <span class="s2">"customer"</span>,
      <span class="s2">"name"</span>: <span class="s2">"Octobat Inc."</span>,
      <span class="s2">"email"</span>: <span class="s2">"admin@octobat.com"</span>,
      <span class="s2">"phone_number"</span>: <span class="s2">"+33 9 52 54 03 70"</span>,
      <span class="s2">"billing_address_line1"</span>: null,
      <span class="s2">"billing_address_line2"</span>: null,
      <span class="s2">"billing_address_city"</span>: <span class="s2">"Paris"</span>,
      <span class="s2">"billing_address_zip"</span>: <span class="s2">"75004"</span>,
      <span class="s2">"billing_address_state"</span>: null,
      <span class="s2">"billing_address_country"</span>: <span class="s2">"France"</span>,
      <span class="s2">"business_type"</span>: <span class="s2">"B2C"</span>,
      <span class="s2">"tax_number"</span>: null,
      <span class="s2">"octobat_billing_page"</span>: <span class="s2">"https://repo.octobat.com/c/1421878635hksc26e4de79"</span>,
      <span class="s2">"created_at"</span>: <span class="s2">"2015-07-12T11:22:29Z"</span>,
      <span class="s2">"updated_at"</span>: <span class="s2">"2015-07-12T11:22:29Z"</span>
    <span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Example request</span>
<span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>
<span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="ss">limit: </span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::ListObject:0x3fe634d74498&gt; JSON: {</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
  <span class="s2">"has_more"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"has_before"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"total_count"</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">#&lt;Octobat::Customer id=oc_cu_1421878635hksc26e4de79 0x00000a&gt; JSON: {</span>
     <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_cu_1421878635hksc26e4de79"</span><span class="p">,</span>
     <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"customer"</span><span class="p">,</span>
     <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Octobat Inc."</span><span class="p">,</span>
     <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"admin@octobat.com"</span><span class="p">,</span>
     <span class="s2">"phone_number"</span><span class="p">:</span> <span class="s2">"+33 9 52 54 03 70"</span><span class="p">,</span>
     <span class="s2">"billing_address_line1"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
     <span class="s2">"billing_address_line2"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
     <span class="s2">"billing_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
     <span class="s2">"billing_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
     <span class="s2">"billing_address_state"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
     <span class="s2">"billing_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
     <span class="s2">"business_type"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
     <span class="s2">"tax_number"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
     <span class="s2">"octobat_billing_page"</span><span class="p">:</span> <span class="s2">"https://repo.octobat.com/c/1421878635hksc26e4de79"</span><span class="p">,</span>
     <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2015-07-12T11:22:29Z"</span><span class="p">,</span>
     <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2015-07-12T11:22:29Z"</span>
    <span class="p">},</span>
    <span class="c1">#&lt;Octobat::Customer[...] ...&gt;,</span>
    <span class="c1">#&lt;Octobat::Customer[...] ...&gt;</span>
  <span class="p">]</span>
<span class="p">}</span>

</code></pre>
<p>All top-level Octobat API resources have support for bulk fetches &ldquo;list&rdquo; API methods. For instance, you can list customers, list invoices.
Like Stripe, Octobat uses cursor-based pagination using the parameter <code class="prettyprint">starting_after</code>. Pass <code class="prettyprint">starting_after</code> parameter at the previous page last object id value to determine where to start in the list.</p>
<h3 id='attributes'>Attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td><strong>limit</strong></td>
<td><strong>integer optional</strong>  A limit on the number of objects to be returned. Must be included between 1 and 100</td>
</tr>
<tr>
<td><strong>starting_after</strong></td>
<td><strong>string optional</strong> A cursor for use in pagination. <code class="prettyprint">starting_after</code> is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with <code class="prettyprint">obj_foo</code>, your subsequent call can include <code class="prettyprint">starting_after=obj_foo</code> in order to fetch the next page of the list.</td>
</tr>
<tr>
<td><strong>ending_before</strong></td>
<td><strong>string optional</strong> A cursor for use in pagination. <code class="prettyprint">ending_before</code> is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with <code class="prettyprint">obj_bar</code>, your subsequent call can include <code class="prettyprint">ending_before=obj_bar</code> in order to fetch the previous page of the list.</td>
</tr>
</tbody></table>
<h3 id='list-response-format'>List response format</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td><strong>object</strong></td>
<td><strong>string, value is &ldquo;list&rdquo;</strong></td>
</tr>
<tr>
<td><strong>data</strong></td>
<td><strong>array</strong> An array containing the actual response elements, paginated by any request parameters.</td>
</tr>
<tr>
<td><strong>has_more</strong></td>
<td><strong>boolean</strong> Whether or not there are more elements available after this page. If <code class="prettyprint">false</code>, this page is the end of the list.</td>
</tr>
<tr>
<td><strong>has_before</strong></td>
<td><strong>boolean</strong> Whether or not there are more elements available before this page. If <code class="prettyprint">false</code>, this page is the beginning of the list.</td>
</tr>
<tr>
<td><strong>total_count</strong></td>
<td><strong>boolean</strong> The total count of all recipients that match your filters, as if there was no pagination.</td>
</tr>
</tbody></table>
<h1 id='source-objects'>Source objects</h1>
<p>Potentially Synchronized objects —including Customer, Invoice, Credit Note, Item and Transaction— have a sources parameter.</p>

<p>Sources references the external data this Octobat object has been created from. As an Octobat object may have been populated from several external objects, <code class="prettyprint">sources</code> is always represented as an array of JSON-encoded hashes - each nested hash being a single reference -.</p>

<p>As an example, a customer created in Octobat from a Stripe customer includes a reference to this last one in the following form:</p>

<p><code class="prettyprint">{&#39;gateway&#39;: &#39;stripe&#39;, &#39;source_type&#39;: &#39;customer&#39;, &#39;identifier&#39;: &#39;cus_xxxxxxxx&#39;}</code>,</p>

<p>so the full <code class="prettyprint">sources</code> attribute value would be:</p>

<p><code class="prettyprint">[{&#39;gateway&#39;: &#39;stripe&#39;, &#39;source_type&#39;: &#39;customer&#39;, &#39;identifier&#39;: &#39;cus_xxxxxxxx&#39;}]</code>.</p>

<p>Nested JSON-encoded hashes have always the same structure with the following keys:</p>
<h3 id='inner-sources-attributes'>Inner sources attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td><strong>gateway</strong></td>
<td><strong>string</strong>  The integration this object came from. Examples: <code class="prettyprint">stripe</code>, <code class="prettyprint">gocardless</code></td>
</tr>
<tr>
<td><strong>source_type</strong></td>
<td><strong>string</strong> The platform object type. For instance, a Stripe payment is called: <code class="prettyprint">charge</code></td>
</tr>
<tr>
<td><strong>identifier</strong></td>
<td><strong>string</strong> The platform object identifier, that you can request on.</td>
</tr>
</tbody></table>

<p>Sources are always serialized and sent back upon API requests and webhooks.
A common useful case is to link the payment platform charge or subscription object to the corresponding invoice or items created in Octobat.</p>
<h1 id='expandable-objects'>Expandable objects</h1><pre class="highlight shell"><code><span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/customers?expand[]<span class="o">=</span>invoices <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:
</code></pre><pre class="highlight ruby"><code><span class="c1"># Example request</span>
<span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>
<span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="ss">expand: </span><span class="p">[</span><span class="s1">'invoices'</span><span class="p">])</span>
</code></pre>
<p>Many objects can be nested into their parent object in their response properties. Those objects can be expanded inline with the <code class="prettyprint">expand</code> request parameter. Objects that can be expanded are noted in this documentation.
This parameter is available on all API requests, and applies to the response of that request only. For example, requesting invoices on a customer will add the customer&rsquo;s invoices list as a property into a full customer object, and will then expand the invoices properties on that customer into a full list object.</p>
<h1 id='idempotent-requests'>Idempotent requests</h1><pre class="highlight shell"><code><span class="c"># Example request</span>
<span class="gp">$ </span>curl -X POST https://apiv2.octobat.com/customers <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:
   -H <span class="s2">"Idempotency-Key: 6OiRDy97Nlrt4ESP"</span> <span class="se">\</span>
   -d <span class="nv">email</span><span class="o">=</span>contact@octobat.com <span class="se">\</span>
   -d <span class="nv">billing_address_country</span><span class="o">=</span>FR <span class="se">\</span>
   -d <span class="nv">name</span><span class="o">=</span>Octobat SAS
</code></pre><pre class="highlight ruby"><code><span class="c1"># Example request</span>
<span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">create</span><span class="p">({</span>
  <span class="ss">email: </span><span class="s2">"contact@octobat.com"</span><span class="p">,</span>
  <span class="ss">billing_address_country: </span><span class="s2">"FR"</span><span class="p">,</span>
  <span class="ss">name: </span><span class="s2">"Octobat SAS"</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="ss">idempotency_key: </span><span class="s2">"6OiRDy97Nlrt4ESP"</span>
<span class="p">})</span>
</code></pre>
<p>The Octobat API supports idempotency for safely retrying requests without accidentally performing the same operation twice. For example, if a request to create an invoice fails due to a network connection error, you can retry the request with the same idempotency key to guarantee that only a single invoice is created.</p>

<p>To perform an idempotent request, provide an additional idempotency_key element to the request headers. curl header syntax is the following:  <code class="prettyprint">Idempotency-Key: &lt;key&gt;</code></p>

<p>How you create unique keys is completely up to you. We suggest using random strings or UUIDs. We&rsquo;ll always send back the same response for requests made with the same key. However, you cannot use the same key with different request parameters. The keys expire after 24 hours.</p>

          <h1 id='customers'>Customers</h1><h2 id='the-customer-object'>The customer object</h2>
<blockquote>
<p>Example object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_cu_1421878635hksc26e4de79"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"customer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"livemode"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Octobat Inc."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contact@octobat.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+33 9 52 54 03 70"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billing_address_line1"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billing_address_line2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billing_address_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Paris"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billing_address_zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"75004"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billing_address_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billing_address_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"France"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B2B"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"octobat_billing_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://repo.octobat.com/c/1421878635hksc26e4de79"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"payment_sources"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"list"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment_source"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_1029383qsfqs"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"payment_source_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Credit Card"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FR"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"exp_month"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
        </span><span class="s2">"exp_year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2017</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Customer objects are required to create other Octobat objects such as invoices or transactions that must be attached to them. The API allows you to create, and update your customers. You can retrieve individual customers as well as a list of all your customers.</p>
<h3 id='attributes'>Attributes</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>id</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>object</strong><br/><span class="details">string, value is &ldquo;<strong>customer</strong>&rdquo;</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>livemode</strong><br/><span class="details">boolean</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>name</strong><br/><span class="details">string</span></td>
      <td><p>Customer&rsquo;s name.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>email</strong><br/><span class="details">string</span></td>
      <td><p>Customer&rsquo;s email.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>phone_number</strong><br/><span class="details">string</span></td>
      <td><p>Customer&rsquo;s phone number.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_line1</strong><br/><span class="details">string</span></td>
      <td><p>Customer&rsquo;s address 1.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_line2</strong><br/><span class="details">string</span></td>
      <td><p>Customer&rsquo;s address 2.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_city</strong><br/><span class="details">string</span></td>
      <td><p>Customer&rsquo;s city.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_zip</strong><br/><span class="details">string</span></td>
      <td><p>Customer&rsquo;s zip code.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_state</strong><br/><span class="details">string</span></td>
      <td><p>Customer&rsquo;s state.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_country</strong><br/><span class="details">string</span></td>
      <td><p>Two-letter ISO code representing the customer&rsquo;s country.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>business_type</strong><br/><span class="details">string</span></td>
      <td><p>The business_type of the customer is either <code>B2B</code> or <code>B2C</code>. Individuals or non-tax-registered companies must be tagged as `B2C` while tax-registered businesses must be tagged as `B2B`.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_number</strong><br/><span class="details">string</span></td>
      <td><p>If your customer is a business registered at EU-VAT, its VAT registration number.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>octobat_billing_page</strong><br/><span class="details">string</span></td>
      <td><p>The url of a page listing all customer&rsquo;s invoices, and where she can edit her billing details</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>sources</strong><br/><span class="details">array</span></td>
      <td><p>References to the integration&rsquo;s objects this customer has been created from</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_sources</strong><br/><span class="details">json</span></td>
      <td><p>Contains a list of means of payment attached to the customer.</p></td>
    </tr>
  </tbody>
</table>
<h2 id='create-a-customer'>Create a customer</h2><pre class="highlight plaintext"><code># Definition
POST https://apiv2.octobat.com/customers
</code></pre><pre class="highlight shell"><code><span class="c"># Example Request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/customers <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">email</span><span class="o">=</span><span class="s2">"contact@octobat.com"</span> <span class="se">\</span>
   -d <span class="nv">name</span><span class="o">=</span><span class="s2">"Octobat Inc."</span> <span class="se">\</span>
   -d <span class="nv">phone_number</span><span class="o">=</span><span class="s2">"+33 9 52 54 03 70"</span> <span class="se">\</span>
   -d <span class="nv">billing_address_zip</span><span class="o">=</span><span class="s2">"75004"</span> <span class="se">\</span>
   -d <span class="nv">billing_address_city</span><span class="o">=</span><span class="s2">"Paris"</span> <span class="se">\</span>
   -d <span class="nv">billing_address_country</span><span class="o">=</span><span class="s2">"France"</span> <span class="se">\</span>
   -d <span class="nv">business_type</span><span class="o">=</span><span class="s2">"B2B"</span> <span class="se">\</span>
   -d <span class="nv">tax_number</span><span class="o">=</span><span class="s2">"FR60528551658"</span>

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_cu_1421878635hksc26e4de79"</span>,
  <span class="s2">"object"</span> : <span class="s2">"customer"</span>,
  <span class="s2">"livemode"</span> : <span class="nb">true</span>,
  <span class="s2">"name"</span>: <span class="s2">"Octobat Inc."</span>,
  <span class="s2">"email"</span>: <span class="s2">"contact@octobat.com"</span>,
  <span class="s2">"phone_number"</span>: <span class="s2">"+33 9 52 54 03 70"</span>,
  <span class="s2">"billing_address_line1"</span>: null,
  <span class="s2">"billing_address_line2"</span>: null,
  <span class="s2">"billing_address_city"</span>: <span class="s2">"Paris"</span>,
  <span class="s2">"billing_address_zip"</span>: <span class="s2">"75004"</span>,
  <span class="s2">"billing_address_state"</span>: null,
  <span class="s2">"billing_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"business_type"</span>: <span class="s2">"B2B"</span>,
  <span class="s2">"tax_number"</span>: <span class="s2">"FR60528551658"</span>,
  <span class="s2">"octobat_billing_page"</span>: <span class="s2">"https://repo.octobat.com/c/1421878635hksc26e4de79"</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"payment_sources"</span> : <span class="o">{</span>
    <span class="s2">"object"</span>: <span class="s2">"list"</span>,
    <span class="s2">"data"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span>
  <span class="ss">name: </span><span class="s2">"Octobat Inc."</span><span class="p">,</span>
  <span class="ss">email: </span><span class="s2">"contact@octobat.com"</span><span class="p">,</span>
  <span class="ss">phone_number: </span><span class="s2">"+33 9 52 54 03 70"</span><span class="p">,</span>
  <span class="ss">billing_address_line1: </span><span class="n">null</span><span class="p">,</span>
  <span class="ss">billing_address_line2: </span><span class="n">null</span><span class="p">,</span>
  <span class="ss">billing_address_city: </span><span class="s2">"Paris"</span><span class="p">,</span>
  <span class="ss">billing_address_zip: </span><span class="s2">"75004"</span><span class="p">,</span>
  <span class="ss">billing_address_state: </span><span class="n">null</span><span class="p">,</span>
  <span class="ss">billing_address_country: </span><span class="s2">"France"</span><span class="p">,</span>
  <span class="ss">business_type: </span><span class="s2">"B2B"</span><span class="p">,</span>
  <span class="ss">tax_number: </span><span class="s2">"FR60528551658"</span>
<span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Customer id=oc_cu_1421878635hksc26e4de79 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_cu_1421878635hksc26e4de79"</span><span class="p">,</span>
  <span class="s2">"object"</span> <span class="p">:</span> <span class="s2">"customer"</span><span class="p">,</span>
  <span class="s2">"livemode"</span> <span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Octobat Inc."</span><span class="p">,</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"admin@octobat.com"</span><span class="p">,</span>
  <span class="s2">"phone_number"</span><span class="p">:</span> <span class="s2">"+33 9 52 54 03 70"</span><span class="p">,</span>
  <span class="s2">"billing_address_line1"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"billing_address_line2"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"billing_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"billing_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"billing_address_state"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"billing_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"business_type"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
  <span class="s2">"tax_number"</span><span class="p">:</span> <span class="s2">"FR60528551658"</span><span class="p">,</span>
  <span class="s2">"octobat_billing_page"</span><span class="p">:</span> <span class="s2">"https://repo.octobat.com/c/1421878635hksc26e4de79"</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"payment_sources"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
    <span class="s2">"data"</span><span class="p">:</span> <span class="p">[]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>name</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s name.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>email</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s email.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>phone_number</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s phone number.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_line1</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s address 1.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_line2</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s address 2.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_city</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s city.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_zip</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s zip code.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_state</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s state.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_country</strong><br/><span class="badge-warning">required</span></td>
      <td><p>Two-letter ISO code representing the customer&rsquo;s country.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>business_type</strong><br/><span class="details">optional</span></td>
      <td><p>The business_type of the customer is either <code>B2B</code> or <code>B2C</code>. An individual must be tagged as `B2C` while a business must be tagged as `B2B`.<br/>If the tax_number and the business_type are not filled, the business_type will be filled to `B2C`.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_number</strong><br/><span class="details">optional</span></td>
      <td><p>If your customer is a business registered at EU-VAT, its VAT registration number.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the customer object if the creation succeeds. Returns an error if parameters are invalid</p>
<h2 id='retrieve-a-customer'>Retrieve a customer</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>

<span class="c"># Example Request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/customers/oc_cu_1421878635hksc26e4de79 <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_cu_1421878635hksc26e4de79"</span>,
  <span class="s2">"object"</span> : <span class="s2">"customer"</span>,
  <span class="s2">"livemode"</span> : <span class="nb">true</span>,
  <span class="s2">"name"</span>: <span class="s2">"Octobat Inc."</span>,
  <span class="s2">"email"</span>: <span class="s2">"contact@octobat.com"</span>,
  <span class="s2">"phone_number"</span>: <span class="s2">"+33 9 52 54 03 70"</span>,
  <span class="s2">"billing_address_line1"</span>: null,
  <span class="s2">"billing_address_line2"</span>: null,
  <span class="s2">"billing_address_city"</span>: <span class="s2">"Paris"</span>,
  <span class="s2">"billing_address_zip"</span>: <span class="s2">"75004"</span>,
  <span class="s2">"billing_address_state"</span>: null,
  <span class="s2">"billing_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"business_type"</span>: <span class="s2">"B2B"</span>,
  <span class="s2">"tax_number"</span>: null,
  <span class="s2">"octobat_billing_page"</span>: <span class="s2">"https://repo.octobat.com/c/1421878635hksc26e4de79"</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"payment_sources"</span> : <span class="o">{</span>
    <span class="s2">"object"</span>: <span class="s2">"list"</span>,
    <span class="s2">"data"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"id"</span>: <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span>,
        <span class="s2">"object"</span>: <span class="s2">"payment_source"</span>,
        <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
        <span class="s2">"source"</span>: <span class="s2">"card_1029383qsfqs"</span>,
        <span class="s2">"payment_source_type"</span>: <span class="s2">"Credit Card"</span>,
        <span class="s2">"details"</span>: <span class="o">{}</span>,
        <span class="s2">"country"</span>: <span class="s2">"FR"</span>,
        <span class="s2">"exp_month"</span>: 12,
        <span class="s2">"exp_year"</span>: 2017
      <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">CUSTOMER_ID</span><span class="p">})</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_cu_1421878635hksc26e4de79"</span><span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Customer id=oc_cu_1421878635hksc26e4de79 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_cu_1421878635hksc26e4de79"</span><span class="p">,</span>
  <span class="s2">"object"</span> <span class="p">:</span> <span class="s2">"customer"</span><span class="p">,</span>
  <span class="s2">"livemode"</span> <span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Octobat Inc."</span><span class="p">,</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"contact@octobat.com"</span><span class="p">,</span>
  <span class="s2">"phone_number"</span><span class="p">:</span> <span class="s2">"+33 9 52 54 03 70"</span><span class="p">,</span>
  <span class="s2">"billing_address_line1"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"billing_address_line2"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"billing_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"billing_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"billing_address_state"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"billing_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"business_type"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
  <span class="s2">"tax_number"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"octobat_billing_page"</span><span class="p">:</span> <span class="s2">"https://repo.octobat.com/c/1421878635hksc26e4de79"</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"payment_sources"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
    <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span>
        <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"payment_source"</span><span class="p">,</span>
        <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
        <span class="s2">"source"</span><span class="p">:</span> <span class="s2">"card_1029383qsfqs"</span><span class="p">,</span>
        <span class="s2">"payment_source_type"</span><span class="p">:</span> <span class="s2">"Credit Card"</span><span class="p">,</span>
        <span class="s2">"details"</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
        <span class="s2">"exp_month"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
        <span class="s2">"exp_year"</span><span class="p">:</span> <span class="mi">2017</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Retrieves the details of an existing customer. You need only supply the unique customer identifier that was returned upon customer creation.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>customer</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The identifier of the customer to be retrieved.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns a customer object if a valid identifier was provided.</p>
<h2 id='update-a-customer'>Update a customer</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
PATCH https://apiv2.octobat.com/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/customers/oc_cu_1421878635hksc26e4de79 <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">email</span><span class="o">=</span><span class="s2">"admin@octobat.com"</span>

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_cu_1421878635hksc26e4de79"</span>,
  <span class="s2">"object"</span> : <span class="s2">"customer"</span>,
  <span class="s2">"livemode"</span> : <span class="nb">true</span>,
  <span class="s2">"name"</span>: <span class="s2">"Octobat Inc."</span>,
  <span class="s2">"email"</span>: <span class="s2">"admin@octobat.com"</span>,
  <span class="s2">"phone_number"</span>: <span class="s2">"+33 9 52 54 03 70"</span>,
  <span class="s2">"billing_address_line1"</span>: null,
  <span class="s2">"billing_address_line2"</span>: null,
  <span class="s2">"billing_address_city"</span>: <span class="s2">"Paris"</span>,
  <span class="s2">"billing_address_zip"</span>: <span class="s2">"75004"</span>,
  <span class="s2">"billing_address_state"</span>: null,
  <span class="s2">"billing_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"business_type"</span>: <span class="s2">"B2B"</span>,
  <span class="s2">"tax_number"</span>: null,
  <span class="s2">"octobat_billing_page"</span>: <span class="s2">"https://repo.octobat.com/c/1421878635hksc26e4de79"</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"payment_sources"</span> : <span class="o">{</span>
    <span class="s2">"object"</span>: <span class="s2">"list"</span>,
    <span class="s2">"data"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"id"</span>: <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span>,
        <span class="s2">"object"</span>: <span class="s2">"payment_source"</span>,
        <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
        <span class="s2">"source"</span>: <span class="s2">"card_1029383qsfqs"</span>,
        <span class="s2">"payment_source_type"</span>: <span class="s2">"Credit Card"</span>,
        <span class="s2">"details"</span>: <span class="o">{}</span>,
        <span class="s2">"country"</span>: <span class="s2">"FR"</span>,
        <span class="s2">"exp_month"</span>: 12,
        <span class="s2">"exp_year"</span>: 2017
      <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">customer</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">CUSTOMER_ID</span><span class="p">})</span>
<span class="n">customer</span><span class="p">.</span><span class="nf">email</span> <span class="o">=</span> <span class="p">{</span><span class="no">NEW_EMAIL</span><span class="p">}</span>
<span class="n">customer</span><span class="p">.</span><span class="nf">save</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">customer</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_cu_1421878635hksc26e4de79"</span><span class="p">)</span>
<span class="n">customer</span><span class="p">.</span><span class="nf">email</span> <span class="o">=</span> <span class="s2">"admin@octobat.com"</span>
<span class="n">customer</span><span class="p">.</span><span class="nf">save</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Customer id=oc_cu_1421878635hksc26e4de79 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_cu_1421878635hksc26e4de79"</span><span class="p">,</span>
  <span class="s2">"object"</span> <span class="p">:</span> <span class="s2">"customer"</span><span class="p">,</span>
  <span class="s2">"livemode"</span> <span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Octobat Inc."</span><span class="p">,</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"admin@octobat.com"</span><span class="p">,</span>
  <span class="s2">"phone_number"</span><span class="p">:</span> <span class="s2">"+33 9 52 54 03 70"</span><span class="p">,</span>
  <span class="s2">"billing_address_line1"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"billing_address_line2"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"billing_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"billing_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"billing_address_state"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"billing_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"business_type"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
  <span class="s2">"tax_number"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"octobat_billing_page"</span><span class="p">:</span> <span class="s2">"https://repo.octobat.com/c/1421878635hksc26e4de79"</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"payment_sources"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
    <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span>
        <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"payment_source"</span><span class="p">,</span>
        <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
        <span class="s2">"source"</span><span class="p">:</span> <span class="s2">"card_1029383qsfqs"</span><span class="p">,</span>
        <span class="s2">"payment_source_type"</span><span class="p">:</span> <span class="s2">"Credit Card"</span><span class="p">,</span>
        <span class="s2">"details"</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
        <span class="s2">"exp_month"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
        <span class="s2">"exp_year"</span><span class="p">:</span> <span class="mi">2017</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Updates the specified customer by setting the values of the parameters passed. Any parameters not provided will be left unchanged.
This request accepts mostly the same arguments as the customer creation call.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>name</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s name.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>email</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s email.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>phone_number</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s phone number.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_line1</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s address 1.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_line2</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s address 2.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_city</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s city.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_zip</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s zip code.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_state</strong><br/><span class="details">optional</span></td>
      <td><p>Customer&rsquo;s state.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>billing_address_country</strong><br/><span class="badge-warning">required</span></td>
      <td><p>Two-letter ISO code representing the customer&rsquo;s country.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>business_type</strong><br/><span class="details">optional</span></td>
      <td><p>The business_type of the customer is either <code>B2B</code> or <code>B2C</code>. An individual must be tagged as `B2C` while a business must be tagged as `B2B`.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_number</strong><br/><span class="details">optional</span></td>
      <td><p>If your customer is a business registered at EU-VAT, its VAT registration number.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the customer object if the update succeeded. Returns an error if update parameters are invalid</p>
<h2 id='list-all-customers'>List all customers</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/customers/

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/customers <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"object"</span>: <span class="s2">"list"</span>,
  <span class="s2">"has_before"</span>: <span class="nb">false</span>,
  <span class="s2">"has_more"</span>: <span class="nb">false</span>,
  <span class="s2">"total_count"</span>: 3,
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: <span class="s2">"oc_cu_1421878635hksc26e4de79"</span>,
      <span class="s2">"object"</span> : <span class="s2">"customer"</span>,
      <span class="s2">"livemode"</span> : <span class="nb">true</span>,
      <span class="s2">"name"</span>: <span class="s2">"Octobat Inc."</span>,
      <span class="s2">"email"</span>: <span class="s2">"admin@octobat.com"</span>,
      <span class="s2">"phone_number"</span>: <span class="s2">"+33 9 52 54 03 70"</span>,
      <span class="s2">"billing_address_line1"</span>: null,
      <span class="s2">"billing_address_line2"</span>: null,
      <span class="s2">"billing_address_city"</span>: <span class="s2">"Paris"</span>,
      <span class="s2">"billing_address_zip"</span>: <span class="s2">"75004"</span>,
      <span class="s2">"billing_address_state"</span>: null,
      <span class="s2">"billing_address_country"</span>: <span class="s2">"France"</span>,
      <span class="s2">"business_type"</span>: <span class="s2">"B2B"</span>,
      <span class="s2">"tax_number"</span>: null,
      <span class="s2">"octobat_billing_page"</span>: <span class="s2">"https://repo.octobat.com/c/1421878635hksc26e4de79"</span>,
      <span class="s2">"sources"</span>: <span class="o">[]</span>,
      <span class="s2">"payment_sources"</span> : <span class="o">{</span>
        <span class="s2">"object"</span>: <span class="s2">"list"</span>,
        <span class="s2">"data"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"id"</span>: <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span>,
            <span class="s2">"object"</span>: <span class="s2">"payment_source"</span>,
            <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
            <span class="s2">"source"</span>: <span class="s2">"card_1029383qsfqs"</span>,
            <span class="s2">"payment_source_type"</span>: <span class="s2">"Credit Card"</span>,
            <span class="s2">"details"</span>: <span class="o">{}</span>,
            <span class="s2">"country"</span>: <span class="s2">"FR"</span>,
            <span class="s2">"exp_month"</span>: 12,
            <span class="s2">"exp_year"</span>: 2017
          <span class="o">}</span>
        <span class="o">]</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::ListObject:0x3fe634d74498&gt; JSON: {</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
  <span class="s2">"has_before"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"has_more"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"total_count"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">#&lt;Octobat::Customer id=oc_cu_1421878635hksc26e4de79 0x00000a&gt; JSON: {</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_cu_1421878635hksc26e4de79"</span><span class="p">,</span>
      <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"customer"</span><span class="p">,</span>
      <span class="s2">"livemode"</span> <span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Octobat Inc."</span><span class="p">,</span>
      <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"admin@octobat.com"</span><span class="p">,</span>
      <span class="s2">"phone_number"</span><span class="p">:</span> <span class="s2">"+33 9 52 54 03 70"</span><span class="p">,</span>
      <span class="s2">"billing_address_line1"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="s2">"billing_address_line2"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="s2">"billing_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
      <span class="s2">"billing_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
      <span class="s2">"billing_address_state"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="s2">"billing_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
      <span class="s2">"business_type"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
      <span class="s2">"tax_number"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="s2">"octobat_billing_page"</span><span class="p">:</span> <span class="s2">"https://repo.octobat.com/c/1421878635hksc26e4de79"</span><span class="p">,</span>
      <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
      <span class="s2">"payment_sources"</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
        <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span>
            <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"payment_source"</span><span class="p">,</span>
            <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
            <span class="s2">"source"</span><span class="p">:</span> <span class="s2">"card_1029383qsfqs"</span><span class="p">,</span>
            <span class="s2">"payment_source_type"</span><span class="p">:</span> <span class="s2">"Credit Card"</span><span class="p">,</span>
            <span class="s2">"details"</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
            <span class="s2">"exp_month"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
            <span class="s2">"exp_year"</span><span class="p">:</span> <span class="mi">2017</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">#&lt;Octobat::Customer[...] ...&gt;,</span>
    <span class="c1">#&lt;Octobat::Customer[...] ...&gt;</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<p>Returns a list of your customers.</p>
<h3 id='returns'>Returns</h3>
<p>A hash with a data property that contains an array of customers. Each entry in the array is a separate customer object. If no customers are available, the resulting array will be empty. This request should never raise an error.</p>

          <h1 id='invoices'>Invoices</h1><h2 id='the-invoice-object'>The invoice object</h2>
<blockquote>
<p>Example object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invoice"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"livemode"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoice_numbering_sequence"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_ns_146192091741t5175c8c47"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"document_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_recipients"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"pdf_file_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoice_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SP2016-200"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoice_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-26"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Subscription"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email_sent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_sent_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_line_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_line_2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Paris"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"75004"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"France"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_country_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_tax_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_business_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B2C"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Octobat SAS"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_line_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_line_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ermont"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"95120"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"France"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_tax_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"legal_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"cancel_and_replace_invoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"object"</span><span class="p">:</span><span class="s2">"list"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_it_146133143279h39ba598f5"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"item"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"confirmed_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-26"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"invoice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"credit_note"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tax_evidence"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eservice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sale_mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B2C"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Entreprise Plan"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"unit_extratax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">19900</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"extratax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">19900</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tax_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">22.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">4378</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gross_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">24278</span><span class="p">,</span><span class="w">
        </span><span class="s2">"declare_in_region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VAT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"item_exchange"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='attributes'>Attributes</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>id</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>object</strong><br/><span class="details">string, value is &ldquo;<strong>invoice</strong>&rdquo;</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>livemode</strong><br/><span class="details">boolean</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer</strong><br/><span class="details">string</span></td>
      <td><p>ID of the customer.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice_numbering_sequence</strong><br/><span class="details">string</span></td>
      <td><p>ID of the invoice numbering sequence.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>document_template</strong><br/><span class="details">string</span></td>
      <td><p>ID of the document template.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_recipients</strong><br/><span class="details">array</span></td>
      <td><p>IDs of payment recipients.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>pdf_file_url</strong><br/><span class="details">string</span></td>
      <td><p>URL of the invoice PDF.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice_number</strong><br/><span class="details">string</span></td>
      <td><p>Autocalculate number of the invoice.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice_date</strong><br/><span class="details">string</span></td>
      <td><p>Date of the invoice.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>description</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_status</strong><br/><span class="details">string</span></td>
      <td><p>The payment status of the invoice is either <code>paid</code> or <code>unpaid</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>status</strong><br/><span class="details">string</span></td>
      <td><p>The status of the invoice is either <code>draft</code>, <code>confirmed</code> or <code>cancelled</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>email_sent</strong><br/><span class="details">boolean</span></td>
      <td><p>If email is sent to the customer or not.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>last_sent_at</strong><br/><span class="details">string</span></td>
      <td><p>Sending date if email has been sent.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>notes</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>language</strong><br/><span class="details">string</span></td>
      <td><p>Invoice&rsquo;s language.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>currency</strong><br/><span class="details">string</span></td>
      <td><p>Invoice&rsquo;s currency.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>legal_fields</strong><br/><span class="details">json</span></td>
      <td><p>Fields depending on the supplier country.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>cancel_and_replace_invoice</strong><br/><span class="details">string</span></td>
      <td><p>ID of the invoice cancelled and replaced by this invoice.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>sources</strong><br/><span class="details">array</span></td>
      <td><p>References to the integration&rsquo;s objects this invoice has been created from.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>items</strong><br/><span class="details">list</span></td>
      <td><p>Invoice items.</p></td>
    </tr>
  </tbody>
</table>
<h2 id='create-an-invoice'>Create an invoice</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
POST https://apiv2.octobat.com/invoices

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/invoices <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">customer</span><span class="o">=</span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span> <span class="se">\</span>
   -d payment_recipients[]<span class="o">=</span><span class="s2">"oc_pr_1461595230igdu5ce59471"</span> <span class="se">\</span>
   -d payment_recipients[]<span class="o">=</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span> <span class="se">\</span>
   -d <span class="nv">description</span><span class="o">=</span><span class="s1">'Subscription'</span> <span class="se">\</span>
   -d <span class="nv">currency</span><span class="o">=</span><span class="s1">'EUR'</span> <span class="se">\</span>
   -d <span class="nv">notes</span><span class="o">=</span><span class="s1">''</span> <span class="se">\</span>


<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>,
  <span class="s2">"object"</span>: <span class="s2">"invoice"</span>,
  <span class="s2">"livemode"</span>: <span class="nb">true</span>,
  <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"invoice_numbering_sequence"</span>: <span class="s2">"oc_ns_146192091741t5175c8c47"</span>,
  <span class="s2">"document_template"</span>: <span class="s2">"oc_dt_14611418085kha558d6ddf"</span>,
  <span class="s2">"payment_recipients"</span>: <span class="o">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span>, <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="o">]</span>,
  <span class="s2">"pdf_file_url"</span>: null,
  <span class="s2">"invoice_number"</span>: <span class="s2">"SP2016-200"</span>,
  <span class="s2">"invoice_date"</span>: <span class="s2">"2016-04-26"</span>,
  <span class="s2">"description"</span>: <span class="s2">"Subscription"</span>,
  <span class="s2">"payment_status"</span>: <span class="s2">"unpaid"</span>,
  <span class="s2">"status"</span>: <span class="s2">"draft"</span>,
  <span class="s2">"email_sent"</span>: <span class="nb">false</span>,
  <span class="s2">"last_sent_at"</span>: null,
  <span class="s2">"notes"</span>: <span class="s2">""</span>,
  <span class="s2">"language"</span>: <span class="s2">"fr"</span>,
  <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
  <span class="s2">"customer_name"</span>: <span class="s2">"John doe"</span>,
  <span class="s2">"customer_address_line_1"</span>: <span class="s2">"25 rue du Petit Musc"</span>,
  <span class="s2">"customer_address_line_2"</span>: null,
  <span class="s2">"customer_address_city"</span>: <span class="s2">"Paris"</span>,
  <span class="s2">"customer_address_state"</span>: null,
  <span class="s2">"customer_address_zip"</span>: <span class="s2">"75004"</span>,
  <span class="s2">"customer_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"customer_country_code"</span>: <span class="s2">"FR"</span>,
  <span class="s2">"customer_tax_number"</span>: null,
  <span class="s2">"customer_business_type"</span>: <span class="s2">"B2C"</span>,
  <span class="s2">"supplier_name"</span>: <span class="s2">"Octobat SAS"</span>,
  <span class="s2">"supplier_address_line_1"</span>: <span class="s2">"230 rue du Général Leclerc"</span>,
  <span class="s2">"supplier_address_line_2"</span>: <span class="s2">""</span>,
  <span class="s2">"supplier_address_city"</span>: <span class="s2">"Ermont"</span>,
  <span class="s2">"supplier_address_state"</span>: null,
  <span class="s2">"supplier_address_zip"</span>: <span class="s2">"95120"</span>,
  <span class="s2">"supplier_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"supplier_tax_number"</span>: null,
  <span class="s2">"legal_fields"</span>: <span class="o">{}</span>,
  <span class="s2">"cancel_and_replace_invoice"</span>: null
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"items"</span>: <span class="o">{</span><span class="s2">"object"</span><span class="o">=</span>&gt;<span class="s2">"list"</span>, <span class="s2">"data"</span><span class="o">=</span>&gt;[]<span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="no">POST</span> <span class="n">https</span><span class="ss">:/</span><span class="o">/</span><span class="n">apiv2</span><span class="p">.</span><span class="nf">octobat</span><span class="p">.</span><span class="nf">com</span><span class="o">/</span><span class="n">invoices</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span>
  <span class="ss">customer: </span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="ss">payment_recipients: </span><span class="p">[</span><span class="s1">'oc_pr_14603917916fhf5eb09a69'</span><span class="p">,</span> <span class="s1">'oc_pr_1461595230igdu5ce59471'</span><span class="p">],</span>
  <span class="ss">description: </span><span class="s1">'Subscription'</span><span class="p">,</span>
  <span class="ss">currency: </span><span class="s1">'EUR'</span><span class="p">,</span>
  <span class="ss">notes: </span><span class="s1">''</span>
<span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Invoice id=oc_in_1461320056h2qq350fdc3a 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"invoice"</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"invoice_numbering_sequence"</span><span class="p">:</span> <span class="s2">"oc_ns_146192091741t5175c8c47"</span><span class="p">,</span>
  <span class="s2">"document_template"</span><span class="p">:</span> <span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span>
  <span class="s2">"payment_recipients"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span><span class="p">,</span> <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="p">],</span>
  <span class="s2">"pdf_file_url"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"invoice_number"</span><span class="p">:</span> <span class="s2">"SP2016-200"</span><span class="p">,</span>
  <span class="s2">"invoice_date"</span><span class="p">:</span> <span class="s2">"2016-04-26"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Subscription"</span><span class="p">,</span>
  <span class="s2">"payment_status"</span><span class="p">:</span> <span class="s2">"unpaid"</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"draft"</span><span class="p">,</span>
  <span class="s2">"email_sent"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"last_sent_at"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"notes"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"fr"</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"customer_name"</span><span class="p">:</span> <span class="s2">"John doe"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_1"</span><span class="p">:</span> <span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_2"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"customer_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"customer_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"customer_country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
  <span class="s2">"customer_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_business_type"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
  <span class="s2">"supplier_name"</span><span class="p">:</span> <span class="s2">"Octobat SAS"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_1"</span><span class="p">:</span> <span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_2"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"supplier_address_city"</span><span class="p">:</span> <span class="s2">"Ermont"</span><span class="p">,</span>
  <span class="s2">"supplier_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"supplier_address_zip"</span><span class="p">:</span> <span class="s2">"95120"</span><span class="p">,</span>
  <span class="s2">"supplier_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"supplier_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"legal_fields"</span><span class="p">:</span> <span class="p">{},</span>
  <span class="s2">"cancel_and_replace_invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"object"</span><span class="o">=&gt;</span><span class="s2">"list"</span><span class="p">,</span> <span class="s2">"data"</span><span class="o">=&gt;</span><span class="p">[]}</span>
<span class="p">}</span>
</code></pre>
<p>To create an invoice for a customer, you must first create it as a draft. Then, you must add items upon it, add payments, and declare if it still has to be paid or if the payment has already been performed.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>customer</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The ID of an existing customer.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_recipients</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The IDs of existing payment recipients.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>currency</strong><br/><span class="badge-warning">required</span></td>
      <td><p>Three-letter ISO code representing the currency of the transaction.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice_numbering_sequence</strong><br/><span class="details">optional</span></td>
      <td><p>Numbering sequence ID. Fallbacks to default numbering sequence if not filled.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>description</strong><br/><span class="details">optional</span></td>
      <td><p>Invoice&rsquo;s description.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>notes</strong><br/><span class="details">optional</span></td>
      <td><p>What you want display at the end of the invoice.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the full invoice object if the creation succeeded. Returns an error if parameters are invalid</p>
<h2 id='update-a-draft-invoice'>Update a draft invoice</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
PATCH https://apiv2.octobat.com/invoices/<span class="o">{</span>INVOICE_ID<span class="o">}</span>

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/invoices/oc_in_1461320056h2qq350fdc3a <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">customer_name</span><span class="o">=</span><span class="s2">"Zuuno SARL"</span> <span class="se">\</span>
   -d <span class="nv">customer_business_type</span><span class="o">=</span><span class="s2">"B2B"</span> <span class="se">\</span>
   -d <span class="nv">customer_tax_number</span><span class="o">=</span><span class="s2">"FR60528551658"</span> <span class="se">\</span>


<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>,
  <span class="s2">"object"</span>: <span class="s2">"invoice"</span>,
  <span class="s2">"livemode"</span>: <span class="nb">true</span>,
  <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"invoice_numbering_sequence"</span>: <span class="s2">"oc_ns_146192091741t5175c8c47"</span>,
  <span class="s2">"document_template"</span>: <span class="s2">"oc_dt_14611418085kha558d6ddf"</span>,
  <span class="s2">"payment_recipients"</span>: <span class="o">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span>, <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="o">]</span>,
  <span class="s2">"pdf_file_url"</span>: null,
  <span class="s2">"invoice_number"</span>: <span class="s2">"SP2016-200"</span>,
  <span class="s2">"invoice_date"</span>: <span class="s2">"2016-04-26"</span>,
  <span class="s2">"description"</span>: <span class="s2">"Subscription"</span>,
  <span class="s2">"payment_status"</span>: <span class="s2">"unpaid"</span>,
  <span class="s2">"status"</span>: <span class="s2">"draft"</span>,
  <span class="s2">"email_sent"</span>: <span class="nb">false</span>,
  <span class="s2">"last_sent_at"</span>: null,
  <span class="s2">"notes"</span>: <span class="s2">""</span>,
  <span class="s2">"language"</span>: <span class="s2">"fr"</span>,
  <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
  <span class="s2">"customer_name"</span>: <span class="s2">"Zuuno SARL"</span>,
  <span class="s2">"customer_address_line_1"</span>: <span class="s2">"25 rue du Petit Musc"</span>,
  <span class="s2">"customer_address_line_2"</span>: null,
  <span class="s2">"customer_address_city"</span>: <span class="s2">"Paris"</span>,
  <span class="s2">"customer_address_state"</span>: null,
  <span class="s2">"customer_address_zip"</span>: <span class="s2">"75004"</span>,
  <span class="s2">"customer_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"customer_country_code"</span>: <span class="s2">"FR"</span>,
  <span class="s2">"customer_tax_number"</span>: <span class="s2">"FR60528551658"</span>,
  <span class="s2">"customer_business_type"</span>: <span class="s2">"B2B"</span>,
  <span class="s2">"supplier_name"</span>: <span class="s2">"Octobat SAS"</span>,
  <span class="s2">"supplier_address_line_1"</span>: <span class="s2">"230 rue du Général Leclerc"</span>,
  <span class="s2">"supplier_address_line_2"</span>: <span class="s2">""</span>,
  <span class="s2">"supplier_address_city"</span>: <span class="s2">"Ermont"</span>,
  <span class="s2">"supplier_address_state"</span>: null,
  <span class="s2">"supplier_address_zip"</span>: <span class="s2">"95120"</span>,
  <span class="s2">"supplier_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"supplier_tax_number"</span>: null,
  <span class="s2">"legal_fields"</span>: <span class="o">{}</span>,
  <span class="s2">"cancel_and_replace_invoice"</span>: null,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"items"</span>: <span class="o">{</span><span class="s2">"object"</span><span class="o">=</span>&gt;<span class="s2">"list"</span>, <span class="s2">"data"</span><span class="o">=</span>&gt;[]<span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">INVOICE_ID</span><span class="p">})</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">customer_name</span> <span class="o">=</span> <span class="p">{</span><span class="no">NEW_CUSTOMER_NAME</span><span class="p">}</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">customer_business_type</span> <span class="o">=</span> <span class="p">{</span><span class="no">NEW_CUSTOMER_BUSINESS_TYPE</span><span class="p">}</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">customer_tax_number</span> <span class="o">=</span> <span class="p">{</span><span class="no">NEW_CUSTOMER_TAX_NUMBER</span><span class="p">}</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">save</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">)</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">customer_name</span> <span class="o">=</span> <span class="s2">"Zuuno SARL"</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">customer_business_type</span> <span class="o">=</span> <span class="s2">"B2B"</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">customer_tax_number</span> <span class="o">=</span> <span class="s2">"FR60528551658"</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">save</span>


<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Invoice id=oc_in_1461320056h2qq350fdc3a 0x00000a&gt; JSON: {{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"invoice"</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"invoice_numbering_sequence"</span><span class="p">:</span> <span class="s2">"oc_ns_146192091741t5175c8c47"</span><span class="p">,</span>
  <span class="s2">"document_template"</span><span class="p">:</span> <span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span>
  <span class="s2">"payment_recipients"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span><span class="p">,</span> <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="p">],</span>
  <span class="s2">"pdf_file_url"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"invoice_number"</span><span class="p">:</span> <span class="s2">"SP2016-200"</span><span class="p">,</span>
  <span class="s2">"invoice_date"</span><span class="p">:</span> <span class="s2">"2016-04-26"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Subscription"</span><span class="p">,</span>
  <span class="s2">"payment_status"</span><span class="p">:</span> <span class="s2">"unpaid"</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"draft"</span><span class="p">,</span>
  <span class="s2">"email_sent"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"last_sent_at"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"notes"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"fr"</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"customer_name"</span><span class="p">:</span> <span class="s2">"Zuuno SARL"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_1"</span><span class="p">:</span> <span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_2"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"customer_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"customer_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"customer_country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
  <span class="s2">"customer_tax_number"</span><span class="p">:</span> <span class="s2">"FR60528551658"</span><span class="p">,</span>
  <span class="s2">"customer_business_type"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
  <span class="s2">"supplier_name"</span><span class="p">:</span> <span class="s2">"Octobat SAS"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_1"</span><span class="p">:</span> <span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_2"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"supplier_address_city"</span><span class="p">:</span> <span class="s2">"Ermont"</span><span class="p">,</span>
  <span class="s2">"supplier_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"supplier_address_zip"</span><span class="p">:</span> <span class="s2">"95120"</span><span class="p">,</span>
  <span class="s2">"supplier_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"supplier_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"legal_fields"</span><span class="p">:</span> <span class="p">{},</span>
  <span class="s2">"cancel_and_replace_invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"object"</span><span class="o">=&gt;</span><span class="s2">"list"</span><span class="p">,</span> <span class="s2">"data"</span><span class="o">=&gt;</span><span class="p">[]}</span>
<span class="p">}</span>
</code></pre><h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>customer_name</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_line_1</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_line_2</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_city</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_state</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_zip</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_country</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_tax_number</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_business_type</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>description</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>notes</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the full invoice object if the update succeeded. Returns an error if the invoice has already been sent by email and is no longer updatable, or if the update fails</p>
<h2 id='send-by-email'>Send by email</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
POST https://apiv2.octobat.com/invoices/<span class="o">{</span>INVOICE_ID<span class="o">}</span>/send

<span class="c"># Example request</span>


<span class="c"># Example response</span>

</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_in_14234251141rdhb20d40fe"</span><span class="p">)</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">send</span><span class="p">()</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_in_14234251141rdhb20d40fe"</span><span class="p">)</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">send</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Invoice id=oc_in_14234251141rdhb20d40fe 0x00000a&gt; JSON: {{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_in_14234251141rdhb20d40fe"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"invoice"</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"invoice_numbering_sequence"</span><span class="p">:</span> <span class="s2">"oc_ns_146192091741t5175c8c47"</span><span class="p">,</span>
  <span class="s2">"document_template"</span><span class="p">:</span> <span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span>
  <span class="s2">"payment_recipients"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span><span class="p">,</span> <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="p">],</span>
  <span class="s2">"pdf_file_url"</span><span class="p">:</span> <span class="s2">"https://www.octobat.com/invoices/oc_in_14234251141rdhb20d40fe.pdf"</span><span class="p">,</span>
  <span class="s2">"invoice_number"</span><span class="p">:</span> <span class="s2">"SP2016-200"</span><span class="p">,</span>
  <span class="s2">"invoice_date"</span><span class="p">:</span> <span class="s2">"2016-04-26"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Subscription"</span><span class="p">,</span>
  <span class="s2">"payment_status"</span><span class="p">:</span> <span class="s2">"unpaid"</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"confirmed"</span><span class="p">,</span>
  <span class="s2">"email_sent"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"last_sent_at"</span><span class="p">:</span> <span class="s2">"2016-08-17T16:01:37Z"</span><span class="p">,</span>
  <span class="s2">"notes"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"fr"</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"customer_name"</span><span class="p">:</span> <span class="s2">"Zuuno SARL"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_1"</span><span class="p">:</span> <span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_2"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"customer_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"customer_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"customer_country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
  <span class="s2">"customer_tax_number"</span><span class="p">:</span> <span class="s2">"FR60528551658"</span><span class="p">,</span>
  <span class="s2">"customer_business_type"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
  <span class="s2">"supplier_name"</span><span class="p">:</span> <span class="s2">"Octobat SAS"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_1"</span><span class="p">:</span> <span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_2"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"supplier_address_city"</span><span class="p">:</span> <span class="s2">"Ermont"</span><span class="p">,</span>
  <span class="s2">"supplier_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"supplier_address_zip"</span><span class="p">:</span> <span class="s2">"95120"</span><span class="p">,</span>
  <span class="s2">"supplier_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"supplier_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"legal_fields"</span><span class="p">:</span> <span class="p">{},</span>
  <span class="s2">"cancel_and_replace_invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"object"</span><span class="ss">:"list"</span><span class="p">,</span>
    <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_146133143279h39ba598f5"</span><span class="p">,</span>
        <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
        <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"confirmed"</span><span class="p">,</span>
        <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="s2">"2016-08-12"</span><span class="p">,</span>
        <span class="s2">"transaction"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"invoice"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span>
        <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
        <span class="s2">"product_type"</span><span class="p">:</span> <span class="s2">"eservice"</span><span class="p">,</span>
        <span class="s2">"sale_mode"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
        <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
        <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">4378</span><span class="p">,</span>
        <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">24278</span><span class="p">,</span>
        <span class="s2">"declare_in_region"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
        <span class="s2">"tax"</span><span class="p">:</span> <span class="s2">"VAT"</span><span class="p">,</span>
        <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="kp">nil</span>
      <span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>email_to</strong><br/><span class="details">optional</span></td>
      <td><p>Email receiver.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>email_title</strong><br/><span class="details">optional</span></td>
      <td><p>Email title.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the full invoice object if the sending succeeded. Returns an error if the invoice customer email is empty or if the invoice hasn&rsquo;t a confirmed status.</p>
<h2 id='confirm-a-draft-invoice'>Confirm a draft invoice</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
PATCH https://apiv2.octobat.com/invoices/<span class="o">{</span>INVOICE_ID<span class="o">}</span>/confirm

<span class="c"># Example request</span>
curl https://www.octobat.com/invoices/oc_in_1461320056h2qq350fdc3a/confirm <span class="se">\</span>
 -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
 -X PATCH

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>,
  <span class="s2">"object"</span>: <span class="s2">"invoice"</span>,
  <span class="s2">"livemode"</span>: <span class="nb">true</span>,
  <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"invoice_numbering_sequence"</span>: <span class="s2">"oc_ns_146192091741t5175c8c47"</span>,
  <span class="s2">"document_template"</span>: <span class="s2">"oc_dt_14611418085kha558d6ddf"</span>,
  <span class="s2">"payment_recipients"</span>: <span class="o">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span>, <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="o">]</span>,
  <span class="s2">"pdf_file_url"</span>: null,
  <span class="s2">"invoice_number"</span>: <span class="s2">"SP2016-200"</span>,
  <span class="s2">"invoice_date"</span>: <span class="s2">"2016-04-26"</span>,
  <span class="s2">"description"</span>: <span class="s2">"Subscription"</span>,
  <span class="s2">"payment_status"</span>: <span class="s2">"unpaid"</span>,
  <span class="s2">"status"</span>: <span class="s2">"confirmed"</span>,
  <span class="s2">"email_sent"</span>: <span class="nb">false</span>,
  <span class="s2">"last_sent_at"</span>: null,
  <span class="s2">"notes"</span>: <span class="s2">""</span>,
  <span class="s2">"language"</span>: <span class="s2">"fr"</span>,
  <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
  <span class="s2">"customer_name"</span>: <span class="s2">"Zuuno SARL"</span>,
  <span class="s2">"customer_address_line_1"</span>: <span class="s2">"25 rue du Petit Musc"</span>,
  <span class="s2">"customer_address_line_2"</span>: null,
  <span class="s2">"customer_address_city"</span>: <span class="s2">"Paris"</span>,
  <span class="s2">"customer_address_state"</span>: null,
  <span class="s2">"customer_address_zip"</span>: <span class="s2">"75004"</span>,
  <span class="s2">"customer_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"customer_country_code"</span>: <span class="s2">"FR"</span>,
  <span class="s2">"customer_tax_number"</span>: <span class="s2">"FR60528551658"</span>,
  <span class="s2">"customer_business_type"</span>: <span class="s2">"B2B"</span>,
  <span class="s2">"supplier_name"</span>: <span class="s2">"Octobat SAS"</span>,
  <span class="s2">"supplier_address_line_1"</span>: <span class="s2">"230 rue du Général Leclerc"</span>,
  <span class="s2">"supplier_address_line_2"</span>: <span class="s2">""</span>,
  <span class="s2">"supplier_address_city"</span>: <span class="s2">"Ermont"</span>,
  <span class="s2">"supplier_address_state"</span>: null,
  <span class="s2">"supplier_address_zip"</span>: <span class="s2">"95120"</span>,
  <span class="s2">"supplier_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"supplier_tax_number"</span>: null,
  <span class="s2">"legal_fields"</span>: <span class="o">{}</span>,
  <span class="s2">"cancel_and_replace_invoice"</span>: null,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"items"</span>: <span class="o">{</span>
    <span class="s2">"object"</span>:<span class="s2">"list"</span>,
    <span class="s2">"data"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"id"</span>: <span class="s2">"oc_it_146133143279h39ba598f5"</span>,
        <span class="s2">"object"</span>: <span class="s2">"item"</span>,
        <span class="s2">"status"</span>: <span class="s2">"confirmed"</span>,
        <span class="s2">"confirmed_on"</span>: <span class="s2">"2016-04-26"</span>,
        <span class="s2">"transaction"</span>: null,
        <span class="s2">"invoice"</span>: <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>,
        <span class="s2">"credit_note"</span>: null,
        <span class="s2">"tax_evidence"</span>: <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span>,
        <span class="s2">"product_type"</span>: <span class="s2">"eservice"</span>,
        <span class="s2">"sale_mode"</span>: <span class="s2">"B2C"</span>,
        <span class="s2">"description"</span>: <span class="s2">"Entreprise Plan"</span>,
        <span class="s2">"unit_extratax_amount"</span>: 19900,
        <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
        <span class="s2">"quantity"</span>: 1,
        <span class="s2">"extratax_amount"</span>: 19900,
        <span class="s2">"tax_rate"</span>: 22.0,
        <span class="s2">"tax_amount"</span>: 4378,
        <span class="s2">"gross_amount"</span>: 24278,
        <span class="s2">"declare_in_region"</span>: <span class="s2">"FR"</span>,
        <span class="s2">"tax"</span>: <span class="s2">"VAT"</span>,
        <span class="s2">"sources"</span>: <span class="o">[]</span>,
        <span class="s2">"item_exchange"</span>: null,
        <span class="s2">"item_workspace_currency_exchange"</span>: null
      <span class="o">}</span>,
      <span class="o">{</span>...<span class="o">}</span>,
      <span class="o">{</span>...<span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">INVOICE_ID</span><span class="p">})</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">confirm</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">)</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">confirm</span><span class="p">()</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Invoice id=oc_in_1461320056h2qq350fdc3a 0x00000a&gt; JSON: {{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"invoice"</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"invoice_numbering_sequence"</span><span class="p">:</span> <span class="s2">"oc_ns_146192091741t5175c8c47"</span><span class="p">,</span>
  <span class="s2">"document_template"</span><span class="p">:</span> <span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span>
  <span class="s2">"payment_recipients"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span><span class="p">,</span> <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="p">],</span>
  <span class="s2">"pdf_file_url"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"invoice_number"</span><span class="p">:</span> <span class="s2">"SP2016-200"</span><span class="p">,</span>
  <span class="s2">"invoice_date"</span><span class="p">:</span> <span class="s2">"2016-04-26"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Subscription"</span><span class="p">,</span>
  <span class="s2">"payment_status"</span><span class="p">:</span> <span class="s2">"unpaid"</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"confirmed"</span><span class="p">,</span>
  <span class="s2">"email_sent"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"last_sent_at"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"notes"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"fr"</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"customer_name"</span><span class="p">:</span> <span class="s2">"Zuuno SARL"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_1"</span><span class="p">:</span> <span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_2"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"customer_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"customer_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"customer_country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
  <span class="s2">"customer_tax_number"</span><span class="p">:</span> <span class="s2">"FR60528551658"</span><span class="p">,</span>
  <span class="s2">"customer_business_type"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
  <span class="s2">"supplier_name"</span><span class="p">:</span> <span class="s2">"Octobat SAS"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_1"</span><span class="p">:</span> <span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_2"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"supplier_address_city"</span><span class="p">:</span> <span class="s2">"Ermont"</span><span class="p">,</span>
  <span class="s2">"supplier_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"supplier_address_zip"</span><span class="p">:</span> <span class="s2">"95120"</span><span class="p">,</span>
  <span class="s2">"supplier_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"supplier_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"legal_fields"</span><span class="p">:</span> <span class="p">{},</span>
  <span class="s2">"cancel_and_replace_invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"object"</span><span class="ss">:"list"</span><span class="p">,</span>
    <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_146133143279h39ba598f5"</span><span class="p">,</span>
        <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
        <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"confirmed"</span><span class="p">,</span>
        <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="s2">"2016-04-26"</span><span class="p">,</span>
        <span class="s2">"transaction"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"invoice"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span>
        <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
        <span class="s2">"product_type"</span><span class="p">:</span> <span class="s2">"eservice"</span><span class="p">,</span>
        <span class="s2">"sale_mode"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
        <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
        <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">4378</span><span class="p">,</span>
        <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">24278</span><span class="p">,</span>
        <span class="s2">"declare_in_region"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
        <span class="s2">"tax"</span><span class="p">:</span> <span class="s2">"VAT"</span><span class="p">,</span>
        <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="kp">nil</span>
      <span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h3 id='returns'>Returns</h3>
<p>After creating a draft invoice and adding invoice items, you have to confirm it before sending it to the customer. At least one item must have attached to the invoice.
Returns the full invoice object if the update succeeded. Returns an error if update parameters are invalid.</p>
<h2 id='cancel-a-confirmed-invoice'>Cancel a confirmed invoice</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
PATCH https://apiv2.octobat.com/invoices/<span class="o">{</span>INVOICE_ID<span class="o">}</span>/cancel

<span class="c"># Example request</span>
curl https://www.octobat.com/invoices/oc_in_1461320056h2qq350fdc3a/cancel <span class="se">\</span>
 -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
 -X PATCH

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>,
  <span class="s2">"object"</span>: <span class="s2">"invoice"</span>,
  <span class="s2">"livemode"</span>: <span class="nb">true</span>,
  <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"invoice_numbering_sequence"</span>: <span class="s2">"oc_ns_146192091741t5175c8c47"</span>,
  <span class="s2">"document_template"</span>: <span class="s2">"oc_dt_14611418085kha558d6ddf"</span>,
  <span class="s2">"payment_recipients"</span>: <span class="o">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span>, <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="o">]</span>,
  <span class="s2">"pdf_file_url"</span>: null,
  <span class="s2">"invoice_number"</span>: <span class="s2">"SP2016-200"</span>,
  <span class="s2">"invoice_date"</span>: <span class="s2">"2016-04-26"</span>,
  <span class="s2">"description"</span>: <span class="s2">"Subscription"</span>,
  <span class="s2">"payment_status"</span>: <span class="s2">"unpaid"</span>,
  <span class="s2">"status"</span>: <span class="s2">"cancelled"</span>,
  <span class="s2">"email_sent"</span>: <span class="nb">false</span>,
  <span class="s2">"last_sent_at"</span>: null,
  <span class="s2">"notes"</span>: <span class="s2">""</span>,
  <span class="s2">"language"</span>: <span class="s2">"fr"</span>,
  <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
  <span class="s2">"customer_name"</span>: <span class="s2">"Zuuno SARL"</span>,
  <span class="s2">"customer_address_line_1"</span>: <span class="s2">"25 rue du Petit Musc"</span>,
  <span class="s2">"customer_address_line_2"</span>: null,
  <span class="s2">"customer_address_city"</span>: <span class="s2">"Paris"</span>,
  <span class="s2">"customer_address_state"</span>: null,
  <span class="s2">"customer_address_zip"</span>: <span class="s2">"75004"</span>,
  <span class="s2">"customer_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"customer_country_code"</span>: <span class="s2">"FR"</span>,
  <span class="s2">"customer_tax_number"</span>: <span class="s2">"FR60528551658"</span>,
  <span class="s2">"customer_business_type"</span>: <span class="s2">"B2B"</span>,
  <span class="s2">"supplier_name"</span>: <span class="s2">"Octobat SAS"</span>,
  <span class="s2">"supplier_address_line_1"</span>: <span class="s2">"230 rue du Général Leclerc"</span>,
  <span class="s2">"supplier_address_line_2"</span>: <span class="s2">""</span>,
  <span class="s2">"supplier_address_city"</span>: <span class="s2">"Ermont"</span>,
  <span class="s2">"supplier_address_state"</span>: null,
  <span class="s2">"supplier_address_zip"</span>: <span class="s2">"95120"</span>,
  <span class="s2">"supplier_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"supplier_tax_number"</span>: null,
  <span class="s2">"legal_fields"</span>: <span class="o">{}</span>,
  <span class="s2">"cancel_and_replace_invoice"</span>: null,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"items"</span>: <span class="o">{</span>
    <span class="s2">"object"</span>:<span class="s2">"list"</span>,
    <span class="s2">"data"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"id"</span>: <span class="s2">"oc_it_146133143279h39ba598f5"</span>,
        <span class="s2">"object"</span>: <span class="s2">"item"</span>,
        <span class="s2">"status"</span>: <span class="s2">"cancelled"</span>,
        <span class="s2">"confirmed_on"</span>: <span class="s2">"2016-04-26"</span>,
        <span class="s2">"transaction"</span>: null,
        <span class="s2">"invoice"</span>: <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>,
        <span class="s2">"credit_note"</span>: null,
        <span class="s2">"tax_evidence"</span>: <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span>,
        <span class="s2">"product_type"</span>: <span class="s2">"eservice"</span>,
        <span class="s2">"sale_mode"</span>: <span class="s2">"B2C"</span>,
        <span class="s2">"description"</span>: <span class="s2">"Entreprise Plan"</span>,
        <span class="s2">"unit_extratax_amount"</span>: 19900,
        <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
        <span class="s2">"quantity"</span>: 1,
        <span class="s2">"extratax_amount"</span>: 19900,
        <span class="s2">"tax_rate"</span>: 22.0,
        <span class="s2">"tax_amount"</span>: 4378,
        <span class="s2">"gross_amount"</span>: 24278,
        <span class="s2">"declare_in_region"</span>: <span class="s2">"FR"</span>,
        <span class="s2">"tax"</span>: <span class="s2">"VAT"</span>,
        <span class="s2">"sources"</span>: <span class="o">[]</span>,
        <span class="s2">"item_exchange"</span>: null,
        <span class="s2">"item_workspace_currency_exchange"</span>: null
      <span class="o">}</span>,
      <span class="o">{</span>...<span class="o">}</span>,
      <span class="o">{</span>...<span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">INVOICE_ID</span><span class="p">})</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">cancel</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">)</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">cancel</span><span class="p">()</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Invoice id=oc_in_1461320056h2qq350fdc3a 0x00000a&gt; JSON: {{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"invoice"</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"invoice_numbering_sequence"</span><span class="p">:</span> <span class="s2">"oc_ns_146192091741t5175c8c47"</span><span class="p">,</span>
  <span class="s2">"document_template"</span><span class="p">:</span> <span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span>
  <span class="s2">"payment_recipients"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span><span class="p">,</span> <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="p">],</span>
  <span class="s2">"pdf_file_url"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"invoice_number"</span><span class="p">:</span> <span class="s2">"SP2016-200"</span><span class="p">,</span>
  <span class="s2">"invoice_date"</span><span class="p">:</span> <span class="s2">"2016-04-26"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Subscription"</span><span class="p">,</span>
  <span class="s2">"payment_status"</span><span class="p">:</span> <span class="s2">"unpaid"</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"cancelled"</span><span class="p">,</span>
  <span class="s2">"email_sent"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"last_sent_at"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"notes"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"fr"</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"customer_name"</span><span class="p">:</span> <span class="s2">"Zuuno SARL"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_1"</span><span class="p">:</span> <span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_2"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"customer_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"customer_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"customer_country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
  <span class="s2">"customer_tax_number"</span><span class="p">:</span> <span class="s2">"FR60528551658"</span><span class="p">,</span>
  <span class="s2">"customer_business_type"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
  <span class="s2">"supplier_name"</span><span class="p">:</span> <span class="s2">"Octobat SAS"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_1"</span><span class="p">:</span> <span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_2"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"supplier_address_city"</span><span class="p">:</span> <span class="s2">"Ermont"</span><span class="p">,</span>
  <span class="s2">"supplier_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"supplier_address_zip"</span><span class="p">:</span> <span class="s2">"95120"</span><span class="p">,</span>
  <span class="s2">"supplier_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"supplier_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"legal_fields"</span><span class="p">:</span> <span class="p">{},</span>
  <span class="s2">"cancel_and_replace_invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"object"</span><span class="ss">:"list"</span><span class="p">,</span>
    <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_146133143279h39ba598f5"</span><span class="p">,</span>
        <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
        <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"cancelled"</span><span class="p">,</span>
        <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="s2">"2016-04-26"</span><span class="p">,</span>
        <span class="s2">"transaction"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"invoice"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span>
        <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
        <span class="s2">"product_type"</span><span class="p">:</span> <span class="s2">"eservice"</span><span class="p">,</span>
        <span class="s2">"sale_mode"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
        <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
        <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">4378</span><span class="p">,</span>
        <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">24278</span><span class="p">,</span>
        <span class="s2">"declare_in_region"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
        <span class="s2">"tax"</span><span class="p">:</span> <span class="s2">"VAT"</span><span class="p">,</span>
        <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="kp">nil</span>
      <span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Change the invoice status to &lsquo;cancelled&rsquo; and create a credit note with invoice items duplicated.</p>
<h3 id='returns'>Returns</h3>
<p>Returns the full invoice object if the update succeeded. Returns an error if update parameters are invalid.</p>
<h2 id='cancel-and-replace-a-confirmed-invoice'>Cancel and replace a confirmed invoice</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
PATCH https://apiv2.octobat.com/invoices/<span class="o">{</span>INVOICE_ID<span class="o">}</span>/cancel_and_replace

<span class="c"># Example request</span>
curl https://www.octobat.com/invoices/oc_in_1476088610jx98e4b8b8d3/cancel_and_replace <span class="se">\</span>
 -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
 -X PATCH

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>,
  <span class="s2">"object"</span>: <span class="s2">"invoice"</span>,
  <span class="s2">"livemode"</span>: <span class="nb">true</span>,
  <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"invoice_numbering_sequence"</span>: <span class="s2">"oc_ns_146192091741t5175c8c47"</span>,
  <span class="s2">"document_template"</span>: <span class="s2">"oc_dt_14611418085kha558d6ddf"</span>,
  <span class="s2">"payment_recipients"</span>: <span class="o">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span>, <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="o">]</span>,
  <span class="s2">"pdf_file_url"</span>: null,
  <span class="s2">"invoice_number"</span>: <span class="s2">"SP2016-200"</span>,
  <span class="s2">"invoice_date"</span>: <span class="s2">"2016-04-26"</span>,
  <span class="s2">"description"</span>: <span class="s2">"Subscription"</span>,
  <span class="s2">"payment_status"</span>: <span class="s2">"unpaid"</span>,
  <span class="s2">"status"</span>: <span class="s2">"draft"</span>,
  <span class="s2">"email_sent"</span>: <span class="nb">false</span>,
  <span class="s2">"last_sent_at"</span>: null,
  <span class="s2">"notes"</span>: <span class="s2">""</span>,
  <span class="s2">"language"</span>: <span class="s2">"fr"</span>,
  <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
  <span class="s2">"customer_name"</span>: <span class="s2">"Zuuno SARL"</span>,
  <span class="s2">"customer_address_line_1"</span>: <span class="s2">"25 rue du Petit Musc"</span>,
  <span class="s2">"customer_address_line_2"</span>: null,
  <span class="s2">"customer_address_city"</span>: <span class="s2">"Paris"</span>,
  <span class="s2">"customer_address_state"</span>: null,
  <span class="s2">"customer_address_zip"</span>: <span class="s2">"75004"</span>,
  <span class="s2">"customer_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"customer_country_code"</span>: <span class="s2">"FR"</span>,
  <span class="s2">"customer_tax_number"</span>: <span class="s2">"FR60528551658"</span>,
  <span class="s2">"customer_business_type"</span>: <span class="s2">"B2B"</span>,
  <span class="s2">"supplier_name"</span>: <span class="s2">"Octobat SAS"</span>,
  <span class="s2">"supplier_address_line_1"</span>: <span class="s2">"230 rue du Général Leclerc"</span>,
  <span class="s2">"supplier_address_line_2"</span>: <span class="s2">""</span>,
  <span class="s2">"supplier_address_city"</span>: <span class="s2">"Ermont"</span>,
  <span class="s2">"supplier_address_state"</span>: null,
  <span class="s2">"supplier_address_zip"</span>: <span class="s2">"95120"</span>,
  <span class="s2">"supplier_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"supplier_tax_number"</span>: null,
  <span class="s2">"legal_fields"</span>: <span class="o">{}</span>,
  <span class="s2">"cancel_and_replace_invoice"</span>: <span class="s2">"oc_in_1476088610jx98e4b8b8d3"</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"items"</span>: <span class="o">{</span>
    <span class="s2">"object"</span>:<span class="s2">"list"</span>,
    <span class="s2">"data"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"id"</span>: <span class="s2">"oc_it_146133143279h39ba598f5"</span>,
        <span class="s2">"object"</span>: <span class="s2">"item"</span>,
        <span class="s2">"status"</span>: <span class="s2">"draft"</span>,
        <span class="s2">"confirmed_on"</span>: null,
        <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
        <span class="s2">"transaction"</span>: null,
        <span class="s2">"invoice"</span>: <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>,
        <span class="s2">"credit_note"</span>: null,
        <span class="s2">"product_type"</span>: <span class="s2">"standard"</span>,
        <span class="s2">"tax_evidence"</span>: <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span>,
        <span class="s2">"sale_mode"</span>: <span class="s2">"B2C"</span>,
        <span class="s2">"description"</span>: <span class="s2">"Entreprise Plan"</span>,
        <span class="s2">"unit_extratax_amount"</span>: 19900,
        <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
        <span class="s2">"quantity"</span>: 1,
        <span class="s2">"extratax_amount"</span>: 19900,
        <span class="s2">"tax_rate"</span>: 22.0,
        <span class="s2">"tax_amount"</span>: 4378,
        <span class="s2">"gross_amount"</span>: 24278,
        <span class="s2">"declare_in_region"</span>: <span class="s2">"FR"</span>,
        <span class="s2">"tax"</span>: <span class="s2">"VAT"</span>,
        <span class="s2">"sources"</span>: <span class="o">[]</span>,
        <span class="s2">"item_exchange"</span>: null,
        <span class="s2">"item_workspace_currency_exchange"</span>: null
      <span class="o">}</span>,
      <span class="o">{</span>...<span class="o">}</span>,
      <span class="o">{</span>...<span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">INVOICE_ID</span><span class="p">})</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">cancel_and_replace</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_in_1476088610jx98e4b8b8d3"</span><span class="p">)</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">cancel_and_replace</span><span class="p">()</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Invoice id=oc_in_1461320056h2qq350fdc3a 0x00000a&gt; JSON: {{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"invoice"</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"invoice_numbering_sequence"</span><span class="p">:</span> <span class="s2">"oc_ns_146192091741t5175c8c47"</span><span class="p">,</span>
  <span class="s2">"document_template"</span><span class="p">:</span> <span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span>
  <span class="s2">"payment_recipients"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span><span class="p">,</span> <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="p">],</span>
  <span class="s2">"pdf_file_url"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"invoice_number"</span><span class="p">:</span> <span class="s2">"SP2016-200"</span><span class="p">,</span>
  <span class="s2">"invoice_date"</span><span class="p">:</span> <span class="s2">"2016-04-26"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Subscription"</span><span class="p">,</span>
  <span class="s2">"payment_status"</span><span class="p">:</span> <span class="s2">"unpaid"</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"draft"</span><span class="p">,</span>
  <span class="s2">"email_sent"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"last_sent_at"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"notes"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"fr"</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"customer_name"</span><span class="p">:</span> <span class="s2">"Zuuno SARL"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_1"</span><span class="p">:</span> <span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_2"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"customer_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"customer_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"customer_country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
  <span class="s2">"customer_tax_number"</span><span class="p">:</span> <span class="s2">"FR60528551658"</span><span class="p">,</span>
  <span class="s2">"customer_business_type"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
  <span class="s2">"supplier_name"</span><span class="p">:</span> <span class="s2">"Octobat SAS"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_1"</span><span class="p">:</span> <span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_2"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"supplier_address_city"</span><span class="p">:</span> <span class="s2">"Ermont"</span><span class="p">,</span>
  <span class="s2">"supplier_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"supplier_address_zip"</span><span class="p">:</span> <span class="s2">"95120"</span><span class="p">,</span>
  <span class="s2">"supplier_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"supplier_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"legal_fields"</span><span class="p">:</span> <span class="p">{},</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"cancel_and_replace_invoice"</span><span class="p">:</span> <span class="s2">"oc_in_1476088610jx98e4b8b8d3"</span><span class="p">,</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"object"</span><span class="ss">:"list"</span><span class="p">,</span>
    <span class="s2">"object"</span><span class="ss">:"list"</span><span class="p">,</span>
    <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_146133143279h39ba598f5"</span><span class="p">,</span>
        <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
        <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"draft"</span><span class="p">,</span>
        <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
        <span class="s2">"transaction"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"invoice"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span>
        <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"product_type"</span><span class="p">:</span> <span class="s2">"standard"</span><span class="p">,</span>
        <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
        <span class="s2">"sale_mode"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
        <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
        <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">4378</span><span class="p">,</span>
        <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">24278</span><span class="p">,</span>
        <span class="s2">"declare_in_region"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
        <span class="s2">"tax"</span><span class="p">:</span> <span class="s2">"VAT"</span><span class="p">,</span>
        <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="kp">nil</span>
      <span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Change the invoice status to &lsquo;cancelled&rsquo;, create a credit note with invoice items duplicated and create a new invoice with a &lsquo;draft&rsquo; status and the same attributes than the &lsquo;cancelled&rsquo; invoice.</p>
<h3 id='returns'>Returns</h3>
<p>Returns the full &lsquo;draft&rsquo; new invoice object if the cancel and replace succeeded. Returns an error if the cancel and replace action is not possible.</p>
<h2 id='delete-a-draft-invoice'>Delete a draft invoice</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
PATCH https://apiv2.octobat.com/invoices/<span class="o">{</span>INVOICE_ID<span class="o">}</span>

<span class="c"># Example request</span>
curl https://www.octobat.com/invoices/oc_in_1461320056h2qq350fdc3a <span class="se">\</span>
 -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
 -X DELETE

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"deleted"</span>: <span class="nb">true</span>,
  <span class="s2">"id"</span>: <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">INVOICE_ID</span><span class="p">})</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">delete</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">)</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">delete</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Invoice id=oc_in_1461320056h2qq350fdc3a 0x00000a&gt; JSON: {{</span>
  <span class="s2">"deleted"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>
<span class="p">}</span>
</code></pre>
<p>You can only delete an invoice with a &lsquo;draft&rsquo; status.</p>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a deleted parameter on success. If the invoice ID does not exist, this call raises an error.</p>
<h2 id='record-a-payment'>Record a payment</h2>
<p>You can record a payment linked to an invoice creating a transaction with the invoice ID. Go to <a href="http://localhost:4567/#create-a-transaction">Record a payment</a>.</p>
<h2 id='list-all-invoices'>List all invoices</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/invoices/

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/invoices <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">customer</span><span class="o">=</span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span> <span class="se">\</span>
   -d <span class="nv">status</span><span class="o">=</span><span class="s2">"draft"</span> <span class="se">\</span>
   -d <span class="nv">starting_after</span><span class="o">=</span><span class="s1">'oc_in_14611572304z2g1db98a0b'</span> <span class="se">\</span>


<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"object"</span>: <span class="s2">"list"</span>,
  <span class="s2">"has_before"</span>: <span class="nb">true</span>,
  <span class="s2">"has_more"</span>: <span class="nb">false</span>,
  <span class="s2">"total_count"</span>: 3,
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>,
      <span class="s2">"object"</span>: <span class="s2">"invoice"</span>,
      <span class="s2">"livemode"</span>: <span class="nb">true</span>,
      <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
      <span class="s2">"invoice_numbering_sequence"</span>: <span class="s2">"oc_ns_146192091741t5175c8c47"</span>,
      <span class="s2">"document_template"</span>: <span class="s2">"oc_dt_14611418085kha558d6ddf"</span>,
      <span class="s2">"payment_recipients"</span>: <span class="o">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span>, <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="o">]</span>,
      <span class="s2">"pdf_file_url"</span>: null,
      <span class="s2">"invoice_number"</span>: <span class="s2">"SP2016-200"</span>,
      <span class="s2">"invoice_date"</span>: <span class="s2">"2016-04-26"</span>,
      <span class="s2">"description"</span>: <span class="s2">"Subscription"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"unpaid"</span>,
      <span class="s2">"status"</span>: <span class="s2">"draft"</span>,
      <span class="s2">"email_sent"</span>: <span class="nb">false</span>,
      <span class="s2">"last_sent_at"</span>: null,
      <span class="s2">"notes"</span>: <span class="s2">""</span>,
      <span class="s2">"language"</span>: <span class="s2">"fr"</span>,
      <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
      <span class="s2">"customer_name"</span>: <span class="s2">"John doe"</span>,
      <span class="s2">"customer_address_line_1"</span>: <span class="s2">"25 rue du Petit Musc"</span>,
      <span class="s2">"customer_address_line_2"</span>: null,
      <span class="s2">"customer_address_city"</span>: <span class="s2">"Paris"</span>,
      <span class="s2">"customer_address_state"</span>: null,
      <span class="s2">"customer_address_zip"</span>: <span class="s2">"75004"</span>,
      <span class="s2">"customer_address_country"</span>: <span class="s2">"France"</span>,
      <span class="s2">"customer_country_code"</span>: <span class="s2">"FR"</span>,
      <span class="s2">"customer_tax_number"</span>: null,
      <span class="s2">"customer_business_type"</span>: <span class="s2">"B2C"</span>,
      <span class="s2">"supplier_name"</span>: <span class="s2">"Octobat SAS"</span>,
      <span class="s2">"supplier_address_line_1"</span>: <span class="s2">"230 rue du Général Leclerc"</span>,
      <span class="s2">"supplier_address_line_2"</span>: <span class="s2">""</span>,
      <span class="s2">"supplier_address_city"</span>: <span class="s2">"Ermont"</span>,
      <span class="s2">"supplier_address_state"</span>: null,
      <span class="s2">"supplier_address_zip"</span>: <span class="s2">"95120"</span>,
      <span class="s2">"supplier_address_country"</span>: <span class="s2">"France"</span>,
      <span class="s2">"supplier_tax_number"</span>: null,
      <span class="s2">"legal_fields"</span>: <span class="o">{}</span>,
      <span class="s2">"sources"</span>: <span class="o">[]</span>,
      <span class="s2">"cancel_and_replace_invoice"</span>: null,
      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"object"</span>:<span class="s2">"list"</span>,
        <span class="s2">"data"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"id"</span>: <span class="s2">"oc_it_146133143279h39ba598f5"</span>,
            <span class="s2">"object"</span>: <span class="s2">"item"</span>,
            <span class="s2">"status"</span>: <span class="s2">"draft"</span>,
            <span class="s2">"confirmed_on"</span>: null,
            <span class="s2">"transaction"</span>: null,
            <span class="s2">"invoice"</span>: <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span>,
            <span class="s2">"credit_note"</span>: null,
            <span class="s2">"tax_evidence"</span>: <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span>,
            <span class="s2">"product_type"</span>: <span class="s2">"eservice"</span>,
            <span class="s2">"sale_mode"</span>: <span class="s2">"B2C"</span>,
            <span class="s2">"description"</span>: <span class="s2">"Entreprise Plan"</span>,
            <span class="s2">"unit_extratax_amount"</span>: 19900,
            <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
            <span class="s2">"quantity"</span>: 1,
            <span class="s2">"extratax_amount"</span>: 19900,
            <span class="s2">"tax_rate"</span>: 22.0,
            <span class="s2">"tax_amount"</span>: 4378,
            <span class="s2">"gross_amount"</span>: 24278,
            <span class="s2">"declare_in_region"</span>: <span class="s2">"FR"</span>,
            <span class="s2">"tax"</span>: <span class="s2">"VAT"</span>,
            <span class="s2">"sources"</span>: <span class="o">[]</span>,
            <span class="s2">"item_exchange"</span>: null,
            <span class="s2">"item_workspace_currency_exchange"</span>: null
          <span class="o">}</span>,
          <span class="o">{</span>...<span class="o">}</span>,
          <span class="o">{</span>...<span class="o">}</span>
        <span class="o">]</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="no">GET</span> <span class="n">https</span><span class="ss">:/</span><span class="o">/</span><span class="n">apiv2</span><span class="p">.</span><span class="nf">octobat</span><span class="p">.</span><span class="nf">com</span><span class="o">/</span><span class="n">invoices</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span>
  <span class="ss">customer: </span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="ss">status: </span><span class="s2">"draft"</span><span class="p">,</span>
  <span class="ss">starting_after: </span><span class="s1">'oc_in_14611572304z2g1db98a0b'</span>
<span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::ListObject:0x3fe634d74498&gt; JSON: {</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
  <span class="s2">"has_before"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"has_more"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"total_count"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span>
      <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"invoice"</span><span class="p">,</span>
      <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
      <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
      <span class="s2">"invoice_numbering_sequence"</span><span class="p">:</span> <span class="s2">"oc_ns_146192091741t5175c8c47"</span><span class="p">,</span>
      <span class="s2">"document_template"</span><span class="p">:</span> <span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span>
      <span class="s2">"payment_recipients"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"oc_pr_14603917916fhf5eb09a69"</span><span class="p">,</span> <span class="s2">"oc_pr_1461595230igdu5ce59471"</span><span class="p">],</span>
      <span class="s2">"pdf_file_url"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"invoice_number"</span><span class="p">:</span> <span class="s2">"SP2016-200"</span><span class="p">,</span>
      <span class="s2">"invoice_date"</span><span class="p">:</span> <span class="s2">"2016-04-26"</span><span class="p">,</span>
      <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Subscription"</span><span class="p">,</span>
      <span class="s2">"payment_status"</span><span class="p">:</span> <span class="s2">"unpaid"</span><span class="p">,</span>
      <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"draft"</span><span class="p">,</span>
      <span class="s2">"email_sent"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
      <span class="s2">"last_sent_at"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"notes"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
      <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"fr"</span><span class="p">,</span>
      <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
      <span class="s2">"customer_name"</span><span class="p">:</span> <span class="s2">"John doe"</span><span class="p">,</span>
      <span class="s2">"customer_address_line_1"</span><span class="p">:</span> <span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span>
      <span class="s2">"customer_address_line_2"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"customer_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
      <span class="s2">"customer_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"customer_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
      <span class="s2">"customer_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
      <span class="s2">"customer_country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
      <span class="s2">"customer_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"customer_business_type"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
      <span class="s2">"supplier_name"</span><span class="p">:</span> <span class="s2">"Octobat SAS"</span><span class="p">,</span>
      <span class="s2">"supplier_address_line_1"</span><span class="p">:</span> <span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span>
      <span class="s2">"supplier_address_line_2"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
      <span class="s2">"supplier_address_city"</span><span class="p">:</span> <span class="s2">"Ermont"</span><span class="p">,</span>
      <span class="s2">"supplier_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"supplier_address_zip"</span><span class="p">:</span> <span class="s2">"95120"</span><span class="p">,</span>
      <span class="s2">"supplier_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
      <span class="s2">"supplier_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"legal_fields"</span><span class="p">:</span> <span class="p">{},</span>
      <span class="s2">"cancel_and_replace_invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
      <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"object"</span><span class="ss">:"list"</span><span class="p">,</span>
        <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_146133143279h39ba598f5"</span><span class="p">,</span>
            <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
            <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"draft"</span><span class="p">,</span>
            <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
            <span class="s2">"transaction"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
            <span class="s2">"invoice"</span><span class="p">:</span> <span class="s2">"oc_in_1461320056h2qq350fdc3a"</span><span class="p">,</span>
            <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
            <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
            <span class="s2">"product_type"</span><span class="p">:</span> <span class="s2">"eservice"</span><span class="p">,</span>
            <span class="s2">"sale_mode"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
            <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
            <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
            <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
            <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">4378</span><span class="p">,</span>
            <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">24278</span><span class="p">,</span>
            <span class="s2">"declare_in_region"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
            <span class="s2">"tax"</span><span class="p">:</span> <span class="s2">"VAT"</span><span class="p">,</span>
            <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
            <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="kp">nil</span>
          <span class="p">},</span>
          <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">},</span>
          <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">},</span>
    <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<p>Returns a list of invoices.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>customer</strong><br/><span class="details">optional</span></td>
      <td><p>The ID of an existing customer.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>status</strong><br/><span class="details">optional</span></td>
      <td><p>The status of the invoice is either <code>draft</code> or <code>confirmed</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>starting_after</strong><br/><span class="details">optional</span></td>
      <td><p>Starting after an invoice id.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>ending_before</strong><br/><span class="details">optional</span></td>
      <td><p>Ending before an invoice id.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice_date[gte]</strong><br/><span class="details">optional</span></td>
      <td><p>Greater than or equal to a date.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice_date[lte]</strong><br/><span class="details">optional</span></td>
      <td><p>Lower than or equal to a date.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>A hash with a data property that contains an array of invoices. Each entry in the array is a separate invoice object. If no invoices are available, the resulting array will be empty. This request should never raise an error.</p>

          <h1 id='credit-notes'>Credit notes</h1><h2 id='the-credit-note-object'>The credit note object</h2>
<blockquote>
<p>Example object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit_note"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"livemode"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credit_note_numbering_sequence"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_cns_1462279395ko79c927206e"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"document_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pdf_file_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credit_note_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CN-AAA-2"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credit_note_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-03"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Refund Subscription"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email_sent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_sent_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"to refund"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_line_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_line_2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Paris"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"75004"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_address_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"France"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_country_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_tax_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_business_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B2C"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Octobat SAS"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_line_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_line_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ermont"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"95120"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_address_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"France"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"supplier_tax_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"legal_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"object"</span><span class="p">:</span><span class="s2">"list"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_it_146133143279h39ba598f5"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"item"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"confirmed_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-03"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"invoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"credit_note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tax_evidence"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eservice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sale_mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B2C"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Entreprise Plan"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"unit_extratax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">19900</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"extratax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">19900</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tax_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">22.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">4378</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gross_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">24278</span><span class="p">,</span><span class="w">
        </span><span class="s2">"declare_in_region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FR"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VAT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"item_exchange"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='attributes'>Attributes</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>id</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>object</strong><br/><span class="details">string, value is &ldquo;<strong>credit_note</strong>&rdquo;</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>livemode</strong><br/><span class="details">boolean</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer</strong><br/><span class="details">string</span></td>
      <td><p>ID of the customer.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>credit_note_numbering_sequence</strong><br/><span class="details">string</span></td>
      <td><p>ID of the credit_note numbering sequence.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>document_template</strong><br/><span class="details">string</span></td>
      <td><p>ID of the document template.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice</strong><br/><span class="details">string</span></td>
      <td><p>ID of the invoice.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>pdf_file_url</strong><br/><span class="details">string</span></td>
      <td><p>URL of the credit note PDF.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>credit_note_number</strong><br/><span class="details">string</span></td>
      <td><p>Autocalculate number of the credit note.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>credit_note_date</strong><br/><span class="details">string</span></td>
      <td><p>Date of the credit note.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>description</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_status</strong><br/><span class="details">string</span></td>
      <td><p>The payment status of the credit note is either <code>refunded</code> or <code>te refund</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>status</strong><br/><span class="details">string</span></td>
      <td><p>The status of the credit note is either <code>draft</code>, <code>confirmed</code> or <code>cancelled</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>email_sent</strong><br/><span class="details">boolean</span></td>
      <td><p>If email is sent to the customer or not.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>last_sent_at</strong><br/><span class="details">string</span></td>
      <td><p>Sending date if email has been sent.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>notes</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>language</strong><br/><span class="details">string</span></td>
      <td><p>Credit note&rsquo;s language.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>currency</strong><br/><span class="details">string</span></td>
      <td><p>Credit note&rsquo;s currency.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>legal_fields</strong><br/><span class="details">json</span></td>
      <td><p>Fields depending on the supplier country.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>sources</strong><br/><span class="details">array</span></td>
      <td><p>References to the integration&rsquo;s objects this credit note has been created from.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>items</strong><br/><span class="details">list</span></td>
      <td><p>Credit note items.</p></td>
    </tr>
  </tbody>
</table>
<h2 id='create-a-credit-note'>Create a credit note</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
POST https://apiv2.octobat.com/credit_notes

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/credit_notes <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">customer</span><span class="o">=</span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span> <span class="se">\</span>
   -d <span class="nv">description</span><span class="o">=</span><span class="s1">'Refund Subscription'</span> <span class="se">\</span>
   -d <span class="nv">currency</span><span class="o">=</span><span class="s1">'EUR'</span> <span class="se">\</span>
   -d <span class="nv">notes</span><span class="o">=</span><span class="s1">''</span> <span class="se">\</span>


<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span>,
  <span class="s2">"object"</span>: <span class="s2">"credit_note"</span>,
  <span class="s2">"livemode"</span>: <span class="nb">true</span>,
  <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"credit_note_numbering_sequence"</span>: <span class="s2">"oc_cns_1462279395ko79c927206e"</span>,
  <span class="s2">"document_template"</span>: <span class="s2">"oc_dt_14611418085kha558d6ddf"</span>,
  <span class="s2">"invoice"</span>: null,
  <span class="s2">"pdf_file_url"</span>: null,
  <span class="s2">"credit_note_number"</span>: <span class="s2">"CN-AAA-2"</span>,
  <span class="s2">"credit_note_date"</span>: <span class="s2">"2016-05-03"</span>,
  <span class="s2">"description"</span>: <span class="s2">"Refund Subscription"</span>,
  <span class="s2">"email_sent"</span>: <span class="nb">false</span>,
  <span class="s2">"last_sent_at"</span>: null,
  <span class="s2">"status"</span>: <span class="s2">"draft"</span>,
  <span class="s2">"payment_status"</span>: <span class="s2">"to refund"</span>,
  <span class="s2">"notes"</span>: <span class="s2">""</span>,
  <span class="s2">"language"</span>: <span class="s2">"fr"</span>,
  <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
  <span class="s2">"customer_name"</span>: <span class="s2">"John doe"</span>,
  <span class="s2">"customer_address_line_1"</span>: <span class="s2">"25 rue du Petit Musc"</span>,
  <span class="s2">"customer_address_line_2"</span>: null,
  <span class="s2">"customer_address_city"</span>: <span class="s2">"Paris"</span>,
  <span class="s2">"customer_address_state"</span>: null,
  <span class="s2">"customer_address_zip"</span>: <span class="s2">"75004"</span>,
  <span class="s2">"customer_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"customer_country_code"</span>: <span class="s2">"FR"</span>,
  <span class="s2">"customer_tax_number"</span>: null,
  <span class="s2">"customer_business_type"</span>: <span class="s2">"B2C"</span>,
  <span class="s2">"supplier_name"</span>: <span class="s2">"Octobat SAS"</span>,
  <span class="s2">"supplier_address_line_1"</span>: <span class="s2">"230 rue du Général Leclerc"</span>,
  <span class="s2">"supplier_address_line_2"</span>: <span class="s2">""</span>,
  <span class="s2">"supplier_address_city"</span>: <span class="s2">"Ermont"</span>,
  <span class="s2">"supplier_address_state"</span>: null,
  <span class="s2">"supplier_address_zip"</span>: <span class="s2">"95120"</span>,
  <span class="s2">"supplier_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"supplier_tax_number"</span>: null,
  <span class="s2">"legal_fields"</span>: <span class="o">{}</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"items"</span>: <span class="o">{</span>
    <span class="s2">"object"</span>:<span class="s2">"list"</span>,
    <span class="s2">"data"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="no">POST</span> <span class="n">https</span><span class="ss">:/</span><span class="o">/</span><span class="n">apiv2</span><span class="p">.</span><span class="nf">octobat</span><span class="p">.</span><span class="nf">com</span><span class="o">/</span><span class="n">credit_notes</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">CreditNote</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span>
  <span class="ss">customer: </span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="ss">description: </span><span class="s1">'Refund Subscription'</span><span class="p">,</span>
  <span class="ss">currency: </span><span class="s1">'EUR'</span><span class="p">,</span>
  <span class="ss">notes: </span><span class="s1">''</span>
<span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::CreditNote id=oc_cn_1462279788aw2y99365ac5 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"credit_note"</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"credit_note_numbering_sequence"</span><span class="p">:</span> <span class="s2">"oc_cns_1462279395ko79c927206e"</span><span class="p">,</span>
  <span class="s2">"document_template"</span><span class="p">:</span> <span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span>
  <span class="s2">"invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"pdf_file_url"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"credit_note_number"</span><span class="p">:</span> <span class="s2">"CN-AAA-2"</span><span class="p">,</span>
  <span class="s2">"credit_note_date"</span><span class="p">:</span> <span class="s2">"2016-05-03"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Refund Subscription"</span><span class="p">,</span>
  <span class="s2">"email_sent"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"last_sent_at"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"draft"</span><span class="p">,</span>
  <span class="s2">"payment_status"</span><span class="p">:</span> <span class="s2">"to refund"</span><span class="p">,</span>
  <span class="s2">"notes"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"fr"</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"customer_name"</span><span class="p">:</span> <span class="s2">"John doe"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_1"</span><span class="p">:</span> <span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_2"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"customer_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"customer_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"customer_country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
  <span class="s2">"customer_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_business_type"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
  <span class="s2">"supplier_name"</span><span class="p">:</span> <span class="s2">"Octobat SAS"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_1"</span><span class="p">:</span> <span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_2"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"supplier_address_city"</span><span class="p">:</span> <span class="s2">"Ermont"</span><span class="p">,</span>
  <span class="s2">"supplier_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"supplier_address_zip"</span><span class="p">:</span> <span class="s2">"95120"</span><span class="p">,</span>
  <span class="s2">"supplier_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"supplier_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"legal_fields"</span><span class="p">:</span> <span class="p">{},</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"object"</span><span class="ss">:"list"</span><span class="p">,</span>
    <span class="s2">"data"</span><span class="p">:</span> <span class="p">[]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>customer</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The ID of an existing customer.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>currency</strong><br/><span class="badge-warning">required</span></td>
      <td><p>Three-letter ISO code representing the currency of the transaction.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>credit_note_numbering_sequence</strong><br/><span class="details">optional</span></td>
      <td><p>Numbering sequence ID. Fallbacks to default numbering sequence if not filled.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice</strong><br/><span class="details">optional</span></td>
      <td><p>Invoice ID. The credit note is linked to this invoice.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>description</strong><br/><span class="details">optional</span></td>
      <td><p>Credit note&rsquo;s description.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>notes</strong><br/><span class="details">optional</span></td>
      <td><p>What you want display at the end of the credit note.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the full credit note object if the creation succeeded. Returns an error if parameters are invalid.</p>
<h2 id='update-a-credit-note'>Update a credit note</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
PATCH https://apiv2.octobat.com/credit_notes/<span class="o">{</span>CREDIT_NOTE_ID<span class="o">}</span>

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/credit_notes/oc_cn_1462279788aw2y99365ac5 <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">customer_name</span><span class="o">=</span><span class="s2">"Zuuno SARL"</span> <span class="se">\</span>
   -d <span class="nv">customer_business_type</span><span class="o">=</span><span class="s2">"B2B"</span> <span class="se">\</span>
   -d <span class="nv">customer_tax_number</span><span class="o">=</span><span class="s2">"FR60528551658"</span> <span class="se">\</span>


<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span>,
  <span class="s2">"object"</span>: <span class="s2">"credit_note"</span>,
  <span class="s2">"livemode"</span>: <span class="nb">true</span>,
  <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"credit_note_numbering_sequence"</span>: <span class="s2">"oc_cns_1462279395ko79c927206e"</span>,
  <span class="s2">"document_template"</span>: <span class="s2">"oc_dt_14611418085kha558d6ddf"</span>,
  <span class="s2">"invoice"</span>: null,
  <span class="s2">"pdf_file_url"</span>: null,
  <span class="s2">"credit_note_number"</span>: <span class="s2">"CN-AAA-2"</span>,
  <span class="s2">"credit_note_date"</span>: <span class="s2">"2016-05-03"</span>,
  <span class="s2">"description"</span>: <span class="s2">"Refund Subscription"</span>,
  <span class="s2">"email_sent"</span>: <span class="nb">false</span>,
  <span class="s2">"last_sent_at"</span>: null,
  <span class="s2">"status"</span>: <span class="s2">"confirmed"</span>,
  <span class="s2">"payment_status"</span>: <span class="s2">"to refund"</span>,
  <span class="s2">"notes"</span>: <span class="s2">""</span>,
  <span class="s2">"language"</span>: <span class="s2">"fr"</span>,
  <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
  <span class="s2">"customer_name"</span>: <span class="s2">"Zuuno SARL"</span>,
  <span class="s2">"customer_address_line_1"</span>: <span class="s2">"25 rue du Petit Musc"</span>,
  <span class="s2">"customer_address_line_2"</span>: null,
  <span class="s2">"customer_address_city"</span>: <span class="s2">"Paris"</span>,
  <span class="s2">"customer_address_state"</span>: null,
  <span class="s2">"customer_address_zip"</span>: <span class="s2">"75004"</span>,
  <span class="s2">"customer_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"customer_country_code"</span>: <span class="s2">"FR"</span>,
  <span class="s2">"customer_tax_number"</span>: null,
  <span class="s2">"customer_business_type"</span>: <span class="s2">"B2B"</span>,
  <span class="s2">"supplier_name"</span>: <span class="s2">"Octobat SAS"</span>,
  <span class="s2">"supplier_address_line_1"</span>: <span class="s2">"230 rue du Général Leclerc"</span>,
  <span class="s2">"supplier_address_line_2"</span>: <span class="s2">""</span>,
  <span class="s2">"supplier_address_city"</span>: <span class="s2">"Ermont"</span>,
  <span class="s2">"supplier_address_state"</span>: null,
  <span class="s2">"supplier_address_zip"</span>: <span class="s2">"95120"</span>,
  <span class="s2">"supplier_address_country"</span>: <span class="s2">"France"</span>,
  <span class="s2">"supplier_tax_number"</span>: <span class="s2">"FR60528551658"</span>,
  <span class="s2">"legal_fields"</span>: <span class="o">{}</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"items"</span>: <span class="o">{</span>
    <span class="s2">"object"</span>:<span class="s2">"list"</span>,
    <span class="s2">"data"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"id"</span>: <span class="s2">"oc_it_146133143279h39ba598f5"</span>,
        <span class="s2">"object"</span>: <span class="s2">"item"</span>,
        <span class="s2">"status"</span>: <span class="s2">"confirmed"</span>,
        <span class="s2">"confirmed_on"</span>: <span class="s2">"2016-05-03"</span>,
        <span class="s2">"transaction"</span>: null,
        <span class="s2">"invoice"</span>: null,
        <span class="s2">"credit_note"</span>: <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span>,
        <span class="s2">"tax_evidence"</span>: <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span>,
        <span class="s2">"product_type"</span>: <span class="s2">"eservice"</span>,
        <span class="s2">"sale_mode"</span>: <span class="s2">"B2C"</span>,
        <span class="s2">"description"</span>: <span class="s2">"Entreprise Plan"</span>,
        <span class="s2">"unit_extratax_amount"</span>: 19900,
        <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
        <span class="s2">"quantity"</span>: 1,
        <span class="s2">"extratax_amount"</span>: 19900,
        <span class="s2">"tax_rate"</span>: 22.0,
        <span class="s2">"tax_amount"</span>: 4378,
        <span class="s2">"gross_amount"</span>: 24278,
        <span class="s2">"declare_in_region"</span>: <span class="s2">"FR"</span>,
        <span class="s2">"tax"</span>: <span class="s2">"VAT"</span>,
        <span class="s2">"sources"</span>: <span class="o">[]</span>,
        <span class="s2">"item_exchange"</span>: null,
        <span class="s2">"item_workspace_currency_exchange"</span>: null
      <span class="o">}</span>,
      <span class="o">{</span>...<span class="o">}</span>,
      <span class="o">{</span>...<span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">credit_note</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">CreditNote</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">CREDIT_NOTE_ID</span><span class="p">})</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">customer_name</span> <span class="o">=</span> <span class="p">{</span><span class="no">NEW_CUSTOMER_NAME</span><span class="p">}</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">customer_business_type</span> <span class="o">=</span> <span class="p">{</span><span class="no">NEW_CUSTOMER_BUSINESS_TYPE</span><span class="p">}</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">customer_tax_number</span> <span class="o">=</span> <span class="p">{</span><span class="no">NEW_CUSTOMER_TAX_NUMBER</span><span class="p">}</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">save</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">credit_note</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">CreditNote</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">)</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">customer_name</span> <span class="o">=</span> <span class="s2">"Zuuno SARL"</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">customer_business_type</span> <span class="o">=</span> <span class="s2">"B2B"</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">customer_tax_number</span> <span class="o">=</span> <span class="s2">"FR60528551658"</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">save</span>


<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::CreditNote id=oc_cn_1462279788aw2y99365ac5 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"credit_note"</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"credit_note_numbering_sequence"</span><span class="p">:</span> <span class="s2">"oc_cns_1462279395ko79c927206e"</span><span class="p">,</span>
  <span class="s2">"document_template"</span><span class="p">:</span> <span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span>
  <span class="s2">"invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"pdf_file_url"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"credit_note_number"</span><span class="p">:</span> <span class="s2">"CN-AAA-2"</span><span class="p">,</span>
  <span class="s2">"credit_note_date"</span><span class="p">:</span> <span class="s2">"2016-05-03"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Refund Subscription"</span><span class="p">,</span>
  <span class="s2">"email_sent"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"last_sent_at"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"confirmed"</span><span class="p">,</span>
  <span class="s2">"payment_status"</span><span class="p">:</span> <span class="s2">"to refund"</span><span class="p">,</span>
  <span class="s2">"notes"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"fr"</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"customer_name"</span><span class="p">:</span> <span class="s2">"Zuuno SARL"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_1"</span><span class="p">:</span> <span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_2"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"customer_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"customer_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"customer_country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
  <span class="s2">"customer_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_business_type"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
  <span class="s2">"supplier_name"</span><span class="p">:</span> <span class="s2">"Octobat SAS"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_1"</span><span class="p">:</span> <span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_2"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"supplier_address_city"</span><span class="p">:</span> <span class="s2">"Ermont"</span><span class="p">,</span>
  <span class="s2">"supplier_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"supplier_address_zip"</span><span class="p">:</span> <span class="s2">"95120"</span><span class="p">,</span>
  <span class="s2">"supplier_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"supplier_tax_number"</span><span class="p">:</span> <span class="s2">"FR60528551658"</span><span class="p">,</span>
  <span class="s2">"legal_fields"</span><span class="p">:</span> <span class="p">{},</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"object"</span><span class="ss">:"list"</span><span class="p">,</span>
    <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_146133143279h39ba598f5"</span><span class="p">,</span>
        <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
        <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"confirmed"</span><span class="p">,</span>
        <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="s2">"2016-05-03"</span><span class="p">,</span>
        <span class="s2">"transaction"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"credit_note"</span><span class="p">:</span> <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">,</span>
        <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
        <span class="s2">"product_type"</span><span class="p">:</span> <span class="s2">"eservice"</span><span class="p">,</span>
        <span class="s2">"sale_mode"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
        <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
        <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">4378</span><span class="p">,</span>
        <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">24278</span><span class="p">,</span>
        <span class="s2">"declare_in_region"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
        <span class="s2">"tax"</span><span class="p">:</span> <span class="s2">"VAT"</span><span class="p">,</span>
        <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="kp">nil</span>
      <span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>customer_name</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_line_1</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_line_2</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_city</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_state</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_zip</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_address_country</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_tax_number</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_business_type</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>description</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>notes</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the full credit note object if the update succeeded. Returns an error if the credit note has already been sent by email and is no longer updatable, or if the update fails.</p>
<h2 id='send-by-email'>Send by email</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
POST https://apiv2.octobat.com/credit_notes/<span class="o">{</span>CREDIT_NOTE_ID<span class="o">}</span>/send

<span class="c"># Example request</span>


<span class="c"># Example response</span>

</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">credit_note</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">CreditNote</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">)</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">send</span><span class="p">()</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">credit_note</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">CreditNote</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">)</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">send</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::CreditNote id=oc_cn_1462279788aw2y99365ac5 0x00000a&gt; JSON: {{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"credit_note"</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"credit_note_numbering_sequence"</span><span class="p">:</span> <span class="s2">"oc_cns_1462279395ko79c927206e"</span><span class="p">,</span>
  <span class="s2">"document_template"</span><span class="p">:</span> <span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span>
  <span class="s2">"invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"pdf_file_url"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"credit_note_number"</span><span class="p">:</span> <span class="s2">"CN-AAA-2"</span><span class="p">,</span>
  <span class="s2">"credit_note_date"</span><span class="p">:</span> <span class="s2">"2016-05-03"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Refund Subscription"</span><span class="p">,</span>
  <span class="s2">"email_sent"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"last_sent_at"</span><span class="p">:</span> <span class="s2">"2016-08-17T16:01:37Z"</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"confirmed"</span><span class="p">,</span>
  <span class="s2">"payment_status"</span><span class="p">:</span> <span class="s2">"to refund"</span><span class="p">,</span>
  <span class="s2">"notes"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"fr"</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"customer_name"</span><span class="p">:</span> <span class="s2">"Zuuno SARL"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_1"</span><span class="p">:</span> <span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span>
  <span class="s2">"customer_address_line_2"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
  <span class="s2">"customer_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
  <span class="s2">"customer_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"customer_country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
  <span class="s2">"customer_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"customer_business_type"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
  <span class="s2">"supplier_name"</span><span class="p">:</span> <span class="s2">"Octobat SAS"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_1"</span><span class="p">:</span> <span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span>
  <span class="s2">"supplier_address_line_2"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"supplier_address_city"</span><span class="p">:</span> <span class="s2">"Ermont"</span><span class="p">,</span>
  <span class="s2">"supplier_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"supplier_address_zip"</span><span class="p">:</span> <span class="s2">"95120"</span><span class="p">,</span>
  <span class="s2">"supplier_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
  <span class="s2">"supplier_tax_number"</span><span class="p">:</span> <span class="s2">"FR60528551658"</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"legal_fields"</span><span class="p">:</span> <span class="p">{},</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"object"</span><span class="ss">:"list"</span><span class="p">,</span>
    <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_146133143279h39ba598f5"</span><span class="p">,</span>
        <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
        <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"confirmed"</span><span class="p">,</span>
        <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="s2">"2015-05-03"</span><span class="p">,</span>
        <span class="s2">"transaction"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"credit_note"</span><span class="p">:</span> <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">,</span>
        <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
        <span class="s2">"product_type"</span><span class="p">:</span> <span class="s2">"eservice"</span><span class="p">,</span>
        <span class="s2">"sale_mode"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
        <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
        <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
        <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">4378</span><span class="p">,</span>
        <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">24278</span><span class="p">,</span>
        <span class="s2">"declare_in_region"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
        <span class="s2">"tax"</span><span class="p">:</span> <span class="s2">"VAT"</span><span class="p">,</span>
        <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
        <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="kp">nil</span>
      <span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">},</span>
      <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>email_to</strong><br/><span class="details">optional</span></td>
      <td><p>Email receiver.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>email_title</strong><br/><span class="details">optional</span></td>
      <td><p>Email title.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the full credit note object if the sending succeeded. Returns an error if the credit note customer email is empty or if the credit note hasn&rsquo;t a confirmed status.</p>
<h2 id='record-a-refund'>Record a refund</h2>
<p>You can record a refund linked to a credit note creating a transaction with the credit note ID. Go to <a href="http://localhost:4567/#create-a-transaction">Record a refund</a>.</p>
<h2 id='list-all-credit-notes'>List all credit notes</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/credit_notes/

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/credit_notes <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">customer</span><span class="o">=</span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span> <span class="se">\</span>


<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"object"</span>: <span class="s2">"list"</span>,
  <span class="s2">"has_before"</span>: <span class="nb">false</span>,
  <span class="s2">"has_more"</span>: <span class="nb">false</span>,
  <span class="s2">"total_count"</span>: 3,
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span>,
      <span class="s2">"object"</span>: <span class="s2">"credit_note"</span>,
      <span class="s2">"livemode"</span>: <span class="nb">true</span>,
      <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
      <span class="s2">"credit_note_numbering_sequence"</span>: <span class="s2">"oc_cns_1462279395ko79c927206e"</span>,
      <span class="s2">"document_template"</span>: <span class="s2">"oc_dt_14611418085kha558d6ddf"</span>,
      <span class="s2">"invoice"</span>: null,
      <span class="s2">"pdf_file_url"</span>: null,
      <span class="s2">"credit_note_number"</span>: <span class="s2">"CN-AAA-2"</span>,
      <span class="s2">"credit_note_date"</span>: <span class="s2">"2016-05-03"</span>,
      <span class="s2">"description"</span>: <span class="s2">"Refund Subscription"</span>,
      <span class="s2">"email_sent"</span>: <span class="nb">false</span>,
      <span class="s2">"last_sent_at"</span>: null,
      <span class="s2">"status"</span>: <span class="s2">"confirmed"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"to refund"</span>,
      <span class="s2">"notes"</span>: <span class="s2">""</span>,
      <span class="s2">"language"</span>: <span class="s2">"fr"</span>,
      <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
      <span class="s2">"customer_name"</span>: <span class="s2">"John doe"</span>,
      <span class="s2">"customer_address_line_1"</span>: <span class="s2">"25 rue du Petit Musc"</span>,
      <span class="s2">"customer_address_line_2"</span>: null,
      <span class="s2">"customer_address_city"</span>: <span class="s2">"Paris"</span>,
      <span class="s2">"customer_address_state"</span>: null,
      <span class="s2">"customer_address_zip"</span>: <span class="s2">"75004"</span>,
      <span class="s2">"customer_address_country"</span>: <span class="s2">"France"</span>,
      <span class="s2">"customer_country_code"</span>: <span class="s2">"FR"</span>,
      <span class="s2">"customer_tax_number"</span>: null,
      <span class="s2">"customer_business_type"</span>: <span class="s2">"B2C"</span>,
      <span class="s2">"supplier_name"</span>: <span class="s2">"Octobat SAS"</span>,
      <span class="s2">"supplier_address_line_1"</span>: <span class="s2">"230 rue du Général Leclerc"</span>,
      <span class="s2">"supplier_address_line_2"</span>: <span class="s2">""</span>,
      <span class="s2">"supplier_address_city"</span>: <span class="s2">"Ermont"</span>,
      <span class="s2">"supplier_address_state"</span>: null,
      <span class="s2">"supplier_address_zip"</span>: <span class="s2">"95120"</span>,
      <span class="s2">"supplier_address_country"</span>: <span class="s2">"France"</span>,
      <span class="s2">"supplier_tax_number"</span>: null,
      <span class="s2">"legal_fields"</span>: <span class="o">{}</span>,
      <span class="s2">"sources"</span>: <span class="o">[]</span>,
      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"object"</span>:<span class="s2">"list"</span>,
        <span class="s2">"data"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"id"</span>: <span class="s2">"oc_it_146133143279h39ba598f5"</span>,
            <span class="s2">"object"</span>: <span class="s2">"item"</span>,
            <span class="s2">"status"</span>: <span class="s2">"confirmed"</span>,
            <span class="s2">"confirmed_on"</span>: <span class="s2">"2016-05-03"</span>,
            <span class="s2">"transaction"</span>: null,
            <span class="s2">"invoice"</span>: null,
            <span class="s2">"credit_note"</span>: <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span>,
            <span class="s2">"tax_evidence"</span>: <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span>,
            <span class="s2">"product_type"</span>: <span class="s2">"eservice"</span>,
            <span class="s2">"sale_mode"</span>: <span class="s2">"B2C"</span>,
            <span class="s2">"description"</span>: <span class="s2">"Entreprise Plan"</span>,
            <span class="s2">"unit_extratax_amount"</span>: 19900,
            <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
            <span class="s2">"quantity"</span>: 1,
            <span class="s2">"extratax_amount"</span>: 19900,
            <span class="s2">"tax_rate"</span>: 22.0,
            <span class="s2">"tax_amount"</span>: 4378,
            <span class="s2">"gross_amount"</span>: 24278,
            <span class="s2">"declare_in_region"</span>: <span class="s2">"FR"</span>,
            <span class="s2">"tax"</span>: <span class="s2">"VAT"</span>,
            <span class="s2">"sources"</span>: <span class="o">[]</span>,
            <span class="s2">"item_exchange"</span>: null,
            <span class="s2">"item_workspace_currency_exchange"</span>: null
          <span class="o">}</span>,
          <span class="o">{</span>...<span class="o">}</span>,
          <span class="o">{</span>...<span class="o">}</span>
        <span class="o">]</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="no">GET</span> <span class="n">https</span><span class="ss">:/</span><span class="o">/</span><span class="n">apiv2</span><span class="p">.</span><span class="nf">octobat</span><span class="p">.</span><span class="nf">com</span><span class="o">/</span><span class="n">credit_notes</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">CreditNote</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span>
  <span class="ss">customer: </span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>
<span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::ListObject:0x3fe634d74498&gt; JSON: {</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
  <span class="s2">"has_before"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"has_more"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"total_count"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">,</span>
      <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"credit_note"</span><span class="p">,</span>
      <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
      <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
      <span class="s2">"credit_note_numbering_sequence"</span><span class="p">:</span> <span class="s2">"oc_cns_1462279395ko79c927206e"</span><span class="p">,</span>
      <span class="s2">"document_template"</span><span class="p">:</span> <span class="s2">"oc_dt_14611418085kha558d6ddf"</span><span class="p">,</span>
      <span class="s2">"invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"pdf_file_url"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"credit_note_number"</span><span class="p">:</span> <span class="s2">"CN-AAA-2"</span><span class="p">,</span>
      <span class="s2">"credit_note_date"</span><span class="p">:</span> <span class="s2">"2016-05-03"</span><span class="p">,</span>
      <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Refund Subscription"</span><span class="p">,</span>
      <span class="s2">"email_sent"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
      <span class="s2">"last_sent_at"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"confirmed"</span><span class="p">,</span>
      <span class="s2">"payment_status"</span><span class="p">:</span> <span class="s2">"to refund"</span><span class="p">,</span>
      <span class="s2">"notes"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
      <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"fr"</span><span class="p">,</span>
      <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
      <span class="s2">"customer_name"</span><span class="p">:</span> <span class="s2">"John doe"</span><span class="p">,</span>
      <span class="s2">"customer_address_line_1"</span><span class="p">:</span> <span class="s2">"25 rue du Petit Musc"</span><span class="p">,</span>
      <span class="s2">"customer_address_line_2"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"customer_address_city"</span><span class="p">:</span> <span class="s2">"Paris"</span><span class="p">,</span>
      <span class="s2">"customer_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"customer_address_zip"</span><span class="p">:</span> <span class="s2">"75004"</span><span class="p">,</span>
      <span class="s2">"customer_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
      <span class="s2">"customer_country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
      <span class="s2">"customer_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"customer_business_type"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
      <span class="s2">"supplier_name"</span><span class="p">:</span> <span class="s2">"Octobat SAS"</span><span class="p">,</span>
      <span class="s2">"supplier_address_line_1"</span><span class="p">:</span> <span class="s2">"230 rue du Général Leclerc"</span><span class="p">,</span>
      <span class="s2">"supplier_address_line_2"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
      <span class="s2">"supplier_address_city"</span><span class="p">:</span> <span class="s2">"Ermont"</span><span class="p">,</span>
      <span class="s2">"supplier_address_state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"supplier_address_zip"</span><span class="p">:</span> <span class="s2">"95120"</span><span class="p">,</span>
      <span class="s2">"supplier_address_country"</span><span class="p">:</span> <span class="s2">"France"</span><span class="p">,</span>
      <span class="s2">"supplier_tax_number"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"legal_fields"</span><span class="p">:</span> <span class="p">{},</span>
      <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
      <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"object"</span><span class="ss">:"list"</span><span class="p">,</span>
        <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_146133143279h39ba598f5"</span><span class="p">,</span>
            <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
            <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"confirmed"</span><span class="p">,</span>
            <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="s2">"2016-05-03"</span><span class="p">,</span>
            <span class="s2">"transaction"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
            <span class="s2">"invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
            <span class="s2">"credit_note"</span><span class="p">:</span> <span class="s2">"oc_cn_1462279788aw2y99365ac5"</span><span class="p">,</span>
            <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
            <span class="s2">"product_type"</span><span class="p">:</span> <span class="s2">"eservice"</span><span class="p">,</span>
            <span class="s2">"sale_mode"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
            <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
            <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
            <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
            <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">4378</span><span class="p">,</span>
            <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">24278</span><span class="p">,</span>
            <span class="s2">"declare_in_region"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
            <span class="s2">"tax"</span><span class="p">:</span> <span class="s2">"VAT"</span><span class="p">,</span>
            <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
            <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="kp">nil</span>
          <span class="p">},</span>
          <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">},</span>
          <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">},</span>
    <span class="p">{.</span><span class="nf">.</span><span class="o">.</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<p>Returns a list of credit notes.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>customer</strong><br/><span class="details">optional</span></td>
      <td><p>The ID of an existing customer.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice</strong><br/><span class="details">optional</span></td>
      <td><p>The ID of an existing invoice.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>starting_after</strong><br/><span class="details">optional</span></td>
      <td><p>Starting after an credit note id.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>ending_before</strong><br/><span class="details">optional</span></td>
      <td><p>Ending before an credit note id.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>credit_note_date[gte]</strong><br/><span class="details">optional</span></td>
      <td><p>Greater than or equal to a date.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>credit_note_date[lte]</strong><br/><span class="details">optional</span></td>
      <td><p>Lower than or equal to a date.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>A hash with a data property that contains an array of credit notes. Each entry in the array is a separate credit note object. If no credit notes are available, the resulting array will be empty. This request should never raise an error.</p>

          <h1 id='tax-evidences'>Tax evidences</h1>
<p>Permit tax automation.</p>
<h2 id='the-tax-evidence-object'>The tax evidence object</h2>
<blockquote>
<p>Example object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_tev_1476028202copc58f93027"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tax_evidence"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"livemode"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sale_mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B2B"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eservice"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax_zone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"declare_in_region"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"applied_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax_id_validation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_tvl_1476032361kezn4a74878c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tax_id_validation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tax_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FR60528551658"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"supplier_evidence"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"94080"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"California"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"supplier_localization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"94080"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"California"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"customer_evidence"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tax_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FR60528551658"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"75002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FR"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ip"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_mode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"customer_localization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FR"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='attributes'>Attributes</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>id</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>object</strong><br/><span class="details">string, value is &ldquo;<strong>tax_evidence</strong>&rdquo;</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>livemode</strong><br/><span class="details">boolean</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>sale_mode</strong><br/><span class="details">string</span></td>
      <td><p>Values can be: B2C or B2B.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>product_type</strong><br/><span class="details">string</span></td>
      <td><p>Values can be: eservice, standard or ebook.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_enabled</strong><br/><span class="details">boolean</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax</strong><br/><span class="details">???</span></td>
      <td><p>???</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_zone</strong><br/><span class="details">???</span></td>
      <td><p>???</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>declare_in_region</strong><br/><span class="details">???</span></td>
      <td><p>???</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>applied_rate</strong><br/><span class="details">float</span></td>
      <td><p>Tax rate applied to the transaction.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_details</strong><br/><span class="details">???</span></td>
      <td><p>???</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_id_validation</strong><br/><span class="details">hash</span></td>
      <td><p>PLUSIEURS ATTRIBUTES</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>supplier_evidence</strong><br/><span class="details">hash</span></td>
      <td><p>PLUSIEURS ATTRIBUTES</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>supplier_localization</strong><br/><span class="details">hash</span></td>
      <td><p>PLUSIEURS ATTRIBUTES</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_evidence</strong><br/><span class="details">hash</span></td>
      <td><p>PLUSIEURS ATTRIBUTES</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer_localization</strong><br/><span class="details">hash</span></td>
      <td><p>PLUSIEURS ATTRIBUTES</p></td>
    </tr>
  </tbody>
</table>
<h2 id='create-a-tax-evidence'>Create a tax evidence</h2><pre class="highlight plaintext"><code># Definition
POST https://apiv2.octobat.com/tax_evidences
</code></pre><pre class="highlight shell"><code><span class="c"># Example Request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/tax_evidences <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">customer</span><span class="o">=</span><span class="s2">"oc_cu_14760321296p4b6e6f113e"</span> <span class="se">\</span>
   -d <span class="nv">product_type</span><span class="o">=</span><span class="s2">"eservice"</span> <span class="se">\</span>
   -d <span class="nv">transaction_date</span><span class="o">=</span> <span class="s2">"2016-10-09"</span>

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_tev_1476028202copc58f93027"</span>,
  <span class="s2">"object"</span>: <span class="s2">"tax_evidence"</span>,
  <span class="s2">"livemode"</span>: <span class="nb">false</span>,
  <span class="s2">"sale_mode"</span>: <span class="s2">"B2B"</span>,
  <span class="s2">"product_type"</span>: <span class="s2">"eservice"</span>,
  <span class="s2">"tax_enabled"</span>: <span class="nb">false</span>,
  <span class="s2">"tax"</span>: nil,
  <span class="s2">"tax_zone"</span>: nil,
  <span class="s2">"declare_in_region"</span>: nil,
  <span class="s2">"applied_rate"</span>: 0.0,
  <span class="s2">"tax_details"</span>: nil,
  <span class="s2">"tax_id_validation"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"oc_tvl_1476032361kezn4a74878c"</span>,
    <span class="s2">"object"</span>: <span class="s2">"tax_id_validation"</span>,
    <span class="s2">"tax_id"</span>: <span class="s2">"FR60528551658"</span>,
    <span class="s2">"is_valid"</span>: <span class="nb">true</span>
  <span class="o">}</span>,
  <span class="s2">"supplier_evidence"</span>: <span class="o">{</span>
    <span class="s2">"zip"</span>: <span class="s2">"94080"</span>,
    <span class="s2">"state"</span>: <span class="s2">"California"</span>,
    <span class="s2">"country"</span>: <span class="s2">"US"</span>
  <span class="o">}</span>,
  <span class="s2">"supplier_localization"</span>: <span class="o">{</span>
    <span class="s2">"zip"</span>: <span class="s2">"94080"</span>,
    <span class="s2">"state"</span>: <span class="s2">"California"</span>,
    <span class="s2">"country"</span>: <span class="s2">"US"</span>
  <span class="o">}</span>,
  <span class="s2">"customer_evidence"</span>: <span class="o">{</span>
    <span class="s2">"tax_id"</span>: <span class="s2">"FR60528551658"</span>,
    <span class="s2">"billing"</span>: <span class="o">{</span>
      <span class="s2">"zip"</span>: <span class="s2">"75002"</span>,
      <span class="s2">"state"</span>: nil,
      <span class="s2">"country"</span>: <span class="s2">"FR"</span>
    <span class="o">}</span>,
    <span class="s2">"ip"</span>: nil,
    <span class="s2">"payment_mode"</span>: nil
  <span class="o">}</span>,
  <span class="s2">"customer_localization"</span>: <span class="o">{</span>
    <span class="s2">"country"</span>: <span class="s2">"FR"</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">TaxEvidence</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span>
  <span class="ss">customer: </span><span class="s2">"oc_cu_14760321296p4b6e6f113e"</span><span class="p">,</span>
  <span class="ss">product_type: </span><span class="s2">"eservice"</span><span class="p">,</span>
  <span class="ss">transaction_date: </span><span class="s2">"2016-10-09"</span>
<span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::TaxEvidence id=oc_tev_1476028202copc58f93027 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_tev_1476028202copc58f93027"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"tax_evidence"</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"sale_mode"</span><span class="p">:</span> <span class="s2">"B2B"</span><span class="p">,</span>
  <span class="s2">"product_type"</span><span class="p">:</span> <span class="s2">"eservice"</span><span class="p">,</span>
  <span class="s2">"tax_enabled"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"tax"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"tax_zone"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"declare_in_region"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"applied_rate"</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
  <span class="s2">"tax_details"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"tax_id_validation"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_tvl_1476032361kezn4a74878c"</span><span class="p">,</span>
    <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"tax_id_validation"</span><span class="p">,</span>
    <span class="s2">"tax_id"</span><span class="p">:</span> <span class="s2">"FR60528551658"</span><span class="p">,</span>
    <span class="s2">"is_valid"</span><span class="p">:</span> <span class="kp">true</span>
  <span class="p">},</span>
  <span class="s2">"supplier_evidence"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"zip"</span><span class="p">:</span> <span class="s2">"94080"</span><span class="p">,</span>
    <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"California"</span><span class="p">,</span>
    <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
  <span class="p">},</span>
  <span class="s2">"supplier_localization"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"zip"</span><span class="p">:</span> <span class="s2">"94080"</span><span class="p">,</span>
    <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"California"</span><span class="p">,</span>
    <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
  <span class="p">},</span>
  <span class="s2">"customer_evidence"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"tax_id"</span><span class="p">:</span> <span class="s2">"FR60528551658"</span><span class="p">,</span>
    <span class="s2">"billing"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"zip"</span><span class="p">:</span> <span class="s2">"75002"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span>
    <span class="p">},</span>
    <span class="s2">"ip"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
    <span class="s2">"payment_mode"</span><span class="p">:</span> <span class="kp">nil</span>
  <span class="p">},</span>
  <span class="s2">"customer_localization"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>customer</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The ID of an existing customer.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>sale_mode</strong><br/><span class="details">optional, default is the customer business type.</span></td>
      <td><p>The sale mode is either <code>B2C</code> or <code>B2B</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>product_type</strong><br/><span class="details">optional, default is your product_type setting.</span></td>
      <td><p>The product type is either <code>eservice</code>, <code>ebook</code> or <code>standard</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>transaction_date</strong><br/><span class="details">optional</span></td>
      <td><p>Date.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the tax evidence object if the creation succeeds. Returns an error if parameters are invalid.</p>
<h2 id='request-a-tax-evidence'>Request a tax evidence</h2><pre class="highlight plaintext"><code># Definition
POST https://apiv2.octobat.com/tax_evidence_requests
</code></pre><pre class="highlight shell"><code><span class="c"># Example Request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/tax_evidence_requests <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">customer_billing_address_country</span><span class="o">=</span><span class="s2">"FR"</span> <span class="se">\</span>
   -d <span class="nv">ip_address</span><span class="o">=</span>8.8.8.8
   -d <span class="nv">payment_source_type</span><span class="o">=</span>card
   -d <span class="nv">payment_source_prefix</span><span class="o">=</span>497209
   -d <span class="nv">payment_source_country</span><span class="o">=</span>FR
   -d <span class="nv">transaction_date</span><span class="o">=</span> <span class="s2">"2016-10-09"</span>

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_tev_1476028202copc58f93027"</span>,
  <span class="s2">"object"</span>: <span class="s2">"tax_evidence"</span>,
  <span class="s2">"livemode"</span>: <span class="nb">false</span>,
  <span class="s2">"sale_mode"</span>: <span class="s2">"B2C"</span>,
  <span class="s2">"product_type"</span>: <span class="s2">"eservice"</span>,
  <span class="s2">"tax_enabled"</span>: <span class="nb">false</span>,
  <span class="s2">"tax"</span>: 1,
  <span class="s2">"tax_zone"</span>: <span class="s2">"EU"</span>,
  <span class="s2">"declare_in_region"</span>: <span class="s2">"FR"</span>,
  <span class="s2">"applied_rate"</span>: 20.0,
  <span class="s2">"tax_details"</span>: <span class="o">[{</span>
    <span class="s2">"rate"</span>: <span class="s2">"20.0"</span>,
    <span class="s2">"tax"</span>: <span class="s2">"VAT"</span>,
    <span class="s2">"name"</span>: <span class="s2">"FR"</span>,
    <span class="s2">"type"</span>: <span class="s2">"country"</span>,
    <span class="s2">"reduced"</span>: <span class="nb">false</span>
  <span class="o">}]</span>,
  <span class="s2">"tax_id_validation"</span>: null,
  <span class="s2">"supplier_evidence"</span>: <span class="o">{</span>
    <span class="s2">"zip"</span>: <span class="s2">"94080"</span>,
    <span class="s2">"state"</span>: <span class="s2">"California"</span>,
    <span class="s2">"country"</span>: <span class="s2">"US"</span>
  <span class="o">}</span>,
  <span class="s2">"supplier_localization"</span>: <span class="o">{</span>
    <span class="s2">"zip"</span>: <span class="s2">"94080"</span>,
    <span class="s2">"state"</span>: <span class="s2">"California"</span>,
    <span class="s2">"country"</span>: <span class="s2">"US"</span>
  <span class="o">}</span>,
  <span class="s2">"customer_evidence"</span>: <span class="o">{</span>
    <span class="s2">"tax_id"</span>: null,
    <span class="s2">"billing"</span>: <span class="o">{</span>
      <span class="s2">"zip"</span>: null,
      <span class="s2">"state"</span>: null,
      <span class="s2">"country"</span>: <span class="s2">"FR"</span>
    <span class="o">}</span>,
    <span class="s2">"ip"</span>: <span class="o">{</span>
      <span class="s2">"address"</span>: <span class="s2">"8.8.8.8"</span>,
      <span class="s2">"country"</span>: <span class="s2">"US"</span>
    <span class="o">}</span>,
    <span class="s2">"payment_source"</span>: <span class="o">{</span>
      <span class="s2">"type"</span>: <span class="s2">"card"</span>,
      <span class="s2">"prefix"</span>: <span class="s2">"497209"</span>,
      <span class="s2">"country"</span>: <span class="s2">"FR"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">"customer_localization"</span>: <span class="o">{</span>
    <span class="s2">"country"</span>: <span class="s2">"FR"</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">TaxEvidenceRequest</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span>
  <span class="ss">customer_billing_address_country: </span><span class="s2">"FR"</span><span class="p">,</span>
  <span class="ss">ip_address: </span><span class="s2">"8.8.8.8"</span><span class="p">,</span>
  <span class="ss">payment_source_prefix: </span><span class="s2">"card"</span><span class="p">,</span>
  <span class="ss">payment_source_prefix: </span><span class="s2">"497209"</span><span class="p">,</span>
  <span class="ss">payment_source_country: </span><span class="s2">"FR"</span>
<span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::TaxEvidence id=oc_tev_1476028202copc58f93027 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_tev_1476028202copc58f93027"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"tax_evidence"</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"sale_mode"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
  <span class="s2">"product_type"</span><span class="p">:</span> <span class="s2">"eservice"</span><span class="p">,</span>
  <span class="s2">"tax_enabled"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"tax"</span><span class="p">:</span> <span class="s2">"VAT"</span><span class="p">,</span>
  <span class="s2">"tax_zone"</span><span class="p">:</span> <span class="s2">"EU"</span><span class="p">,</span>
  <span class="s2">"declare_in_region"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
  <span class="s2">"applied_rate"</span><span class="p">:</span> <span class="mi">20</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
  <span class="s2">"tax_details"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s2">"rate"</span><span class="p">:</span> <span class="s2">"20.0"</span><span class="p">,</span>
    <span class="s2">"tax"</span><span class="p">:</span> <span class="s2">"VAT"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"country"</span><span class="p">,</span>
    <span class="s2">"reduced"</span><span class="p">:</span> <span class="kp">false</span>
  <span class="p">}],</span>
  <span class="s2">"tax_id_validation"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"supplier_evidence"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"zip"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
    <span class="s2">"state"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
    <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span>
  <span class="p">},</span>
  <span class="s2">"supplier_localization"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"zip"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
    <span class="s2">"state"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
    <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span>
  <span class="p">},</span>
  <span class="s2">"customer_evidence"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"tax_id"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
    <span class="s2">"billing"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"zip"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span>
    <span class="p">},</span>
    <span class="s2">"ip"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"8.8.8.8"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span>
    <span class="p">},</span>
    <span class="s2">"payment_source"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"card"</span><span class="p">,</span>
      <span class="s2">"prefix"</span><span class="p">:</span> <span class="s2">"497209"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">"customer_localization"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h3 id='use-cases'>Use cases</h3>
<p>If you want to compute an automatic tax calculation to display the tax rates for a given transaction before it is actually performed, or if the customer doesn&rsquo;t exist yet in Octobat, you can request a tax evidence from Octobat giving the useful evidence parameters such as customer&rsquo;s billing address, IP address, tax number, or payment source prefix/country.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>customer_billing_address_zip</strong><br/><span class="badge-warning">optional</span></td>
      <td><p>The customer&rsquo;s billing address zipcode.</p></td>
    </tr>
    <tr class="first-row">
      <td class="attribute"><strong>customer_billing_address_state</strong><br/><span class="badge-warning">optional</span></td>
      <td><p>The customer&rsquo;s billing address state.</p></td>
    </tr>
    <tr class="first-row">
      <td class="attribute"><strong>customer_billing_address_country</strong><br/><span class="badge-warning">optional</span></td>
      <td><p>The customer&rsquo;s billing address country.</p></td>
    </tr>
    <tr class="first-row">
      <td class="attribute"><strong>customer_tax_number</strong><br/><span class="badge-warning">optional</span></td>
      <td><p>The customer&rsquo;s tax number (VAT id in EU).</p></td>
    </tr>
    <tr class="first-row">
      <td class="attribute"><strong>customer_business_type</strong><br/><span class="badge-warning">optional</span></td>
      <td><p>Possible values: <code>B2B</code> or <code>B2C</code>. Use it to hardcode the automatic business type detection</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>product_type</strong><br/><span class="badge-warning">optional</span></td>
      <td><p>The product type is either <code>eservice</code>, <code>ebook</code> or <code>standard</code>. Defaults to the settings default product type.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>ip_address</strong><br/><span class="badge-warning">optional</span></td>
      <td><p>The IP address used by the customer when making the purchase. Can be formatted as an IPv4 or IPv6.</p></td>
    </tr>
    
    <tr>
      <td class="attribute"><strong>payment_source_type</strong><br/><span class="badge-warning">optional</span></td>
      <td><p>The payment source type used to perform the transaction. Possible values: <code>card</code> or <code>bank account</code> or <code>other</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_source_prefix</strong><br/><span class="badge-warning">optional</span></td>
      <td><p>The credit card first 6 digits or IBAN/Bank account prefix. Used as an evidence to detect the payment source country</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_source_country</strong><br/><span class="badge-warning">optional</span></td>
      <td><p>Fill it if you know where this payment source is from.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>transaction_date</strong><br/><span class="details">optional</span></td>
      <td><p>Date.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the tax evidence object if the creation succeeds. Returns an error if parameters are invalid.</p>

          <h1 id='items'>Items</h1>
<p>Either attached to a document or a transaction.</p>
<h2 id='the-item-object'>The item object</h2>
<blockquote>
<p>Example object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_it_1460568443g3wu6b48fc3e"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"item"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"draft"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"confirmed_on"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_txn_14605672518yko2fd30d23"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credit_note"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax_evidence"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eservice"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sale_mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B2C"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"discountable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Entreprise Plan"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"unit_extratax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">19900</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"extratax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">19900</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">22.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">4378</span><span class="p">,</span><span class="w">
  </span><span class="s2">"gross_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">24278</span><span class="p">,</span><span class="w">
  </span><span class="s2">"declare_in_region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VAT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"item_exchange"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"exchange_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8864</span><span class="p">,</span><span class="w">
    </span><span class="s2">"exchange_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-13T17:27:24.228Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"exchanged_to_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"exchange_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9526</span><span class="p">,</span><span class="w">
    </span><span class="s2">"exchange_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-11T17:27:24.228Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"exchanged_to_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='attributes'>Attributes</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>id</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>object</strong><br/><span class="details">string, value is &ldquo;<strong>item</strong>&rdquo;</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>status</strong><br/><span class="details">string</span></td>
      <td><p>Depending on the invoice, credit note or transaction status.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>confirmed_on</strong><br/><span class="details">date</span></td>
      <td><p>If the item is confirmed, the date on which it has been approved for accounting or tax purposes</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>transaction</strong><br/><span class="details">string</span></td>
      <td><p>ID of the transaction.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice</strong><br/><span class="details">string</span></td>
      <td><p>ID of the invoice.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>credit_note</strong><br/><span class="details">string</span></td>
      <td><p>ID of the credit note.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_evidence</strong><br/><span class="details">string</span></td>
      <td><p>ID of the tax_evidence.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>product_type</strong><br/><span class="details">string</span></td>
      <td><p>Values can be: eservice, standard or ebook.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>sale_mode</strong><br/><span class="details">string</span></td>
      <td><p>Depending on your client if it is a consumer or a business.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>discountable</strong><br/><span class="details">boolean</span></td>
      <td><p>Is it discountable or not?</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>description</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>unit_extratax_amount</strong><br/><span class="details">integer</span></td>
      <td><p>The unit price of the item without tax.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>currency</strong><br/><span class="details">string</span></td>
      <td><p>3-letter <a href="http://www.xe.com/iso4217.php#section2" target="_blank">ISO code for currency</a>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>quantity</strong><br/><span class="details">integer</span></td>
      <td><p>A positive integer representing the number of instances of the item.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>extratax_amount</strong><br/><span class="details">integer</span></td>
      <td><p>The unit price multiplied by the quantity.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_rate</strong><br/><span class="details">float</span></td>
      <td><p>Tax rate applied to the item.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_amount</strong><br/><span class="details">integer</span></td>
      <td><p>The tax amount based on the tax rate and the extratax amount.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>gross_amount</strong><br/><span class="details">integer</span></td>
      <td><p>The amount all tax included.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>declare_in_region</strong><br/><span class="details">string</span></td>
      <td><p>The country in which the tax is declared.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax</strong><br/><span class="details">string</span></td>
      <td><p>The tax name applied.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>item_exchange</strong><br/><span class="details">hash</span></td>
      <td><p>The tax currency exchange rate information if relevant.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>sources</strong><br/><span class="details">array</span></td>
      <td><p>References to the integration&rsquo;s objects this item has been created from.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>item_workspace_currency_exchange</strong><br/><span class="details">hash</span></td>
      <td><p>The default workspace currency exchange information if relevant.</p></td>
    </tr>
  </tbody>
</table>
<h2 id='create-an-item'>Create an item</h2><pre class="highlight plaintext"><code># Definition
POST https://apiv2.octobat.com/transactions/{TRANSACTION_ID}/items
POST https://apiv2.octobat.com/invoices/{INVOICE_ID}/items
POST https://apiv2.octobat.com/credit_notes/{CREDIT_NOTE_ID}/items
</code></pre><pre class="highlight shell"><code><span class="c"># Example Request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/invoices/oc_in_14619363114yke51e2ce5f/items <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">tax_evidence</span><span class="o">=</span><span class="s2">"oc_tev_1460565379am3be8f5ef71"</span> <span class="se">\</span>
   -d <span class="nv">quantity</span><span class="o">=</span>1 <span class="se">\</span>
   -d <span class="nv">currency</span><span class="o">=</span><span class="s2">"USD"</span> <span class="se">\</span>
   -d <span class="nv">unit_extratax_amount</span><span class="o">=</span>19900 <span class="se">\</span>
   -d <span class="nv">description</span><span class="o">=</span><span class="s2">"Entreprise Plan"</span>

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_it_1460568443g3wu6b48fc3e"</span>,
  <span class="s2">"object"</span>: <span class="s2">"item"</span>,
  <span class="s2">"status"</span><span class="o">=</span>&gt;<span class="s2">"draft"</span>,
  <span class="s2">"confirmed_on"</span>: nil,
  <span class="s2">"transaction"</span>: nil,
  <span class="s2">"invoice"</span>: <span class="s2">"oc_in_14619363114yke51e2ce5f"</span>,
  <span class="s2">"credit_note"</span>: nil,
  <span class="s2">"tax_evidence"</span>: <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span>,
  <span class="s2">"product_type"</span><span class="o">=</span>&gt;<span class="s2">"eservice"</span>,
  <span class="s2">"sale_mode"</span><span class="o">=</span>&gt;<span class="s2">"B2C"</span>,
  <span class="s2">"discountable"</span><span class="o">=</span>&gt;true,
  <span class="s2">"description"</span>: <span class="s2">"Entreprise Plan"</span>,
  <span class="s2">"unit_extratax_amount"</span>: 19900,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"quantity"</span>: 1,
  <span class="s2">"extratax_amount"</span>: 19900,
  <span class="s2">"tax_rate"</span>: 22.0,
  <span class="s2">"tax_amount"</span>: 4378,
  <span class="s2">"gross_amount"</span>: 24278,
  <span class="s2">"declare_in_region"</span><span class="o">=</span>&gt;<span class="s2">"IT"</span>,
  <span class="s2">"tax"</span><span class="o">=</span>&gt;<span class="s2">"VAT"</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"item_exchange"</span>: <span class="o">{</span>
    <span class="s2">"exchange_rate"</span>: 0.8864,
    <span class="s2">"exchange_date"</span>: <span class="s2">"2016-04-13T17:27:24.228Z"</span>,
    <span class="s2">"exchanged_to_currency"</span>: <span class="s2">"EUR"</span>
  <span class="o">}</span>,
  <span class="s2">"item_workspace_currency_exchange"</span>: <span class="o">{</span>
    <span class="s2">"exchange_rate"</span>: 0.9526,
    <span class="s2">"exchange_date"</span>: <span class="s2">"2016-04-11T17:27:24.228Z"</span>,
    <span class="s2">"exchanged_to_currency"</span>: <span class="s2">"GBP"</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_in_14619363114yke51e2ce5f"</span><span class="p">)</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span>
  <span class="ss">tax_evidence: </span><span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
  <span class="ss">quantity: </span><span class="mi">1</span><span class="p">,</span>
  <span class="ss">currency: </span><span class="s2">"USD"</span><span class="p">,</span>
  <span class="ss">unit_extratax_amount: </span><span class="mi">19900</span><span class="p">,</span>
  <span class="ss">description: </span><span class="s2">"Entreprise Plan"</span>
<span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Item id=oc_it_1460568443g3wu6b48fc3e 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_1460568443g3wu6b48fc3e"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="o">=&gt;</span><span class="s2">"draft"</span><span class="p">,</span>
  <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"transaction"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"invoice"</span><span class="p">:</span> <span class="s2">"oc_in_14619363114yke51e2ce5f"</span><span class="p">,</span>
  <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
  <span class="s2">"product_type"</span><span class="ss">:"eservice"</span><span class="p">,</span>
  <span class="s2">"sale_mode"</span><span class="ss">:"B2C"</span><span class="p">,</span>
  <span class="s2">"discountable"</span><span class="ss">:true</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
  <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
  <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
  <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
  <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">4378</span><span class="p">,</span>
  <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">24278</span><span class="p">,</span>
  <span class="s2">"declare_in_region"</span><span class="o">=&gt;</span><span class="s2">"IT"</span><span class="p">,</span>
  <span class="s2">"tax"</span><span class="ss">:"VAT"</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"exchange_rate"</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">8864</span><span class="p">,</span>
    <span class="s2">"exchange_date"</span><span class="p">:</span> <span class="s2">"2016-04-13T17:27:24.228Z"</span><span class="p">,</span>
    <span class="s2">"exchanged_to_currency"</span><span class="p">:</span> <span class="s2">"EUR"</span>
  <span class="p">},</span>
  <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"exchange_rate"</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">9526</span><span class="p">,</span>
    <span class="s2">"exchange_date"</span><span class="p">:</span> <span class="s2">"2016-04-11T17:27:24.228Z"</span><span class="p">,</span>
    <span class="s2">"exchanged_to_currency"</span><span class="p">:</span> <span class="s2">"GBP"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>unit_extratax_amount</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The unit price of the item without tax. Tax-included amount will be computed then. You can choose either to fill `unit_extratax_amount` or `unit_gross_amount` to fix the item price, but filling both will return an error</p></td>
    </tr>
    <tr class="first-row">
      <td class="attribute"><strong>unit_gross_amount</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The unit price of the item with tax included. Extratax amount will be computed then. You can choose either to fill `unit_extratax_amount` or `unit_gross_amount` to fix the item price, but filling both will return an error</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>currency</strong><br/><span class="badge-warning">required</span></td>
      <td><p>3-letter <a href="http://www.xe.com/iso4217.php#section2" target="_blank">ISO code for currency</a>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_evidence</strong><br/><span class="details">optional, either <strong>tax_evidence</strong> or <strong>tax_rate</strong> is required</span></td>
      <td><p>The ID of an existing tax evidence. This is where customer and supplier transaction evidences are stored. The tax rate applied to the item is automatically calculated thanks to the evidences.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>tax_rate</strong><br/><span class="details">optional, either <strong>tax_rate</strong> or <strong>tax_evidence</strong> is required</span></td>
      <td><p>The tax rate that you want apply to the item.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>product_type</strong><br/><span class="details">optional, default is in the &ldquo;tax settings&rdquo; section. If the <strong>tax_evidence</strong> argument is filled, it will have priority.</span></td>
      <td><p>The product type is either <code>eservice</code>, <code>ebook</code> or <code>standard</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>quantity</strong><br/><span class="details">optional, default is 1</span></td>
      <td><p>A positive integer representing the number of instances of the item.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>description</strong><br/><span class="details">optional</span></td>
      <td><p>Item&rsquo;s description.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the item object if the creation succeeds. Returns an error if parameters are invalid.</p>
<h2 id='retrieve-an-item'>Retrieve an item</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/invoices/<span class="o">{</span>INVOICE_ID<span class="o">}</span>/items/<span class="o">{</span>ITEM_ID<span class="o">}</span>/
GET https://apiv2.octobat.com/transactions/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>/items/<span class="o">{</span>ITEM_ID<span class="o">}</span>/
GET https://apiv2.octobat.com/credit_notes/<span class="o">{</span>CREDIT_NOTE_ID<span class="o">}</span>/items/<span class="o">{</span>ITEM_ID<span class="o">}</span>/

<span class="c"># Example Request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/invoices/oc_in_14619363114yke51e2ce5f/items/oc_it_1461938887kzsf607ad4cf <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_it_1460568443g3wu6b48fc3e"</span>,
  <span class="s2">"object"</span>: <span class="s2">"item"</span>,
  <span class="s2">"status"</span><span class="o">=</span>&gt;<span class="s2">"draft"</span>,
  <span class="s2">"confirmed_on"</span>: null,
  <span class="s2">"transaction"</span>: null,
  <span class="s2">"invoice"</span>: <span class="s2">"oc_in_14619363114yke51e2ce5f"</span>,
  <span class="s2">"credit_note"</span>: null,
  <span class="s2">"tax_evidence"</span>: <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span>,
  <span class="s2">"product_type"</span><span class="o">=</span>&gt;<span class="s2">"eservice"</span>,
  <span class="s2">"sale_mode"</span><span class="o">=</span>&gt;<span class="s2">"B2C"</span>,
  <span class="s2">"discountable"</span><span class="o">=</span>&gt;true,
  <span class="s2">"description"</span>: <span class="s2">"Entreprise Plan"</span>,
  <span class="s2">"unit_extratax_amount"</span>: 19900,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"quantity"</span>: 1,
  <span class="s2">"extratax_amount"</span>: 19900,
  <span class="s2">"tax_rate"</span>: 22.0,
  <span class="s2">"tax_amount"</span>: 4378,
  <span class="s2">"gross_amount"</span>: 24278,
  <span class="s2">"declare_in_region"</span><span class="o">=</span>&gt;<span class="s2">"IT"</span>,
  <span class="s2">"tax"</span><span class="o">=</span>&gt;<span class="s2">"VAT"</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"item_exchange"</span>: <span class="o">{</span>
    <span class="s2">"exchange_rate"</span>: 0.8864,
    <span class="s2">"exchange_date"</span>: <span class="s2">"2016-04-13T17:27:24.228Z"</span>,
    <span class="s2">"exchanged_to_currency"</span>: <span class="s2">"EUR"</span>
  <span class="o">}</span>,
  <span class="s2">"item_workspace_currency_exchange"</span>: <span class="o">{</span>
    <span class="s2">"exchange_rate"</span>: 0.9526,
    <span class="s2">"exchange_date"</span>: <span class="s2">"2016-04-11T17:27:24.228Z"</span>,
    <span class="s2">"exchanged_to_currency"</span>: <span class="s2">"GBP"</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">INVOICE_ID</span><span class="p">})</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">ITEM_ID</span><span class="p">})</span>
<span class="c1"># or</span>
<span class="n">transaction</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">TRANSACTION_ID</span><span class="p">})</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">ITEM_ID</span><span class="p">})</span>
<span class="c1"># or</span>
<span class="n">credit_note</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">CreditNote</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">CREDIT_NOTE_ID</span><span class="p">})</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">ITEM_ID</span><span class="p">})</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_in_14619363114yke51e2ce5f"</span><span class="p">)</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_it_1461938887kzsf607ad4cf"</span><span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Item id=oc_it_1460568443g3wu6b48fc3e 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_1460568443g3wu6b48fc3e"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="o">=&gt;</span><span class="s2">"draft"</span><span class="p">,</span>
  <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"transaction"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"invoice"</span><span class="p">:</span> <span class="s2">"oc_in_14619363114yke51e2ce5f"</span><span class="p">,</span>
  <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
  <span class="s2">"product_type"</span><span class="o">=&gt;</span><span class="s2">"eservice"</span><span class="p">,</span>
  <span class="s2">"sale_mode"</span><span class="o">=&gt;</span><span class="s2">"B2C"</span><span class="p">,</span>
  <span class="s2">"discountable"</span><span class="ss">:true</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
  <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
  <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
  <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
  <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">4378</span><span class="p">,</span>
  <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">24278</span><span class="p">,</span>
  <span class="s2">"declare_in_region"</span><span class="o">=&gt;</span><span class="s2">"IT"</span><span class="p">,</span>
  <span class="s2">"tax"</span><span class="o">=&gt;</span><span class="s2">"VAT"</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"exchange_rate"</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">8864</span><span class="p">,</span>
    <span class="s2">"exchange_date"</span><span class="p">:</span> <span class="s2">"2016-04-13T17:27:24.228Z"</span><span class="p">,</span>
    <span class="s2">"exchanged_to_currency"</span><span class="p">:</span> <span class="s2">"EUR"</span>
  <span class="p">},</span>
  <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"exchange_rate"</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">9526</span><span class="p">,</span>
    <span class="s2">"exchange_date"</span><span class="p">:</span> <span class="s2">"2016-04-11T17:27:24.228Z"</span><span class="p">,</span>
    <span class="s2">"exchanged_to_currency"</span><span class="p">:</span> <span class="s2">"GBP"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Retrieves the details of an existing item.</p>
<h3 id='returns'>Returns</h3>
<p>Returns an item object if a valid identifier was provided.</p>
<h2 id='update-an-item'>Update an item</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
PATCH https://apiv2.octobat.com/transactions/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>/items/<span class="o">{</span>ITEM_ID<span class="o">}</span>
PATCH https://apiv2.octobat.com/invoices/<span class="o">{</span>INVOICE_ID<span class="o">}</span>/items/<span class="o">{</span>ITEM_ID<span class="o">}</span>
PATCH https://apiv2.octobat.com/credit_notes/<span class="o">{</span>CREDIT_NOTE_ID<span class="o">}</span>/items/<span class="o">{</span>ITEM_ID<span class="o">}</span>

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/invoices/oc_in_1462181488gsc8cf8fafbd/items/oc_it_14621841535d5d3284b1a2 <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">quantity</span><span class="o">=</span>5 <span class="se">\</span>
   -d <span class="nv">unit_extratax_amount</span><span class="o">=</span>1000 <span class="se">\</span>

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_it_14621841535d5d3284b1a2"</span>,
  <span class="s2">"object"</span>: <span class="s2">"item"</span>,
  <span class="s2">"status"</span><span class="o">=</span>&gt;<span class="s2">"draft"</span>,
  <span class="s2">"confirmed_on"</span>: null,
  <span class="s2">"transaction"</span>: null,
  <span class="s2">"invoice"</span>: <span class="s2">"oc_in_1462181488gsc8cf8fafbd"</span>,
  <span class="s2">"credit_note"</span>: null,
  <span class="s2">"tax_evidence"</span>: <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span>,
  <span class="s2">"product_type"</span><span class="o">=</span>&gt;<span class="s2">"eservice"</span>,
  <span class="s2">"sale_mode"</span><span class="o">=</span>&gt;<span class="s2">"B2C"</span>,
  <span class="s2">"discountable"</span><span class="o">=</span>&gt;true,
  <span class="s2">"description"</span>: <span class="s2">"Entreprise Plan"</span>,
  <span class="s2">"unit_extratax_amount"</span>: 1000,
  <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
  <span class="s2">"quantity"</span>: 5,
  <span class="s2">"extratax_amount"</span>: 5000,
  <span class="s2">"tax_rate"</span>: 22.0,
  <span class="s2">"tax_amount"</span>: 1100,
  <span class="s2">"gross_amount"</span>: 6100,
  <span class="s2">"declare_in_region"</span><span class="o">=</span>&gt;<span class="s2">"IT"</span>,
  <span class="s2">"tax"</span><span class="o">=</span>&gt;<span class="s2">"VAT"</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>,
  <span class="s2">"item_exchange"</span>: null,
  <span class="s2">"item_workspace_currency_exchange"</span>: null
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">INVOICE_ID</span><span class="p">})</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">ITEM_ID</span><span class="p">})</span>
<span class="c1"># or</span>
<span class="n">transaction</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">TRANSACTION_ID</span><span class="p">})</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">ITEM_ID</span><span class="p">})</span>
<span class="c1"># or</span>
<span class="n">credit_note</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">CreditNote</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">CREDIT_NOTE_ID</span><span class="p">})</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">ITEM_ID</span><span class="p">})</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_in_1462181488gsc8cf8fafbd"</span><span class="p">)</span>
<span class="n">item</span> <span class="o">=</span> <span class="n">invoice</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_it_14621841535d5d3284b1a2"</span><span class="p">)</span>
<span class="n">item</span><span class="p">.</span><span class="nf">quantity</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">item</span><span class="p">.</span><span class="nf">unit_extratax_amount</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">item</span><span class="p">.</span><span class="nf">save</span>


<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Item id=oc_it_1460568443g3wu6b48fc3e 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_14621841535d5d3284b1a2"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="ss">:"draft"</span><span class="p">,</span>
  <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"transaction"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"invoice"</span><span class="p">:</span> <span class="s2">"oc_in_1462181488gsc8cf8fafbd"</span><span class="p">,</span>
  <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
  <span class="s2">"product_type"</span><span class="ss">:"eservice"</span><span class="p">,</span>
  <span class="s2">"sale_mode"</span><span class="ss">:"B2C"</span><span class="p">,</span>
  <span class="s2">"discountable"</span><span class="ss">:true</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
  <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
  <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
  <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">1100</span><span class="p">,</span>
  <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">6100</span><span class="p">,</span>
  <span class="s2">"declare_in_region"</span><span class="ss">:"IT"</span><span class="p">,</span>
  <span class="s2">"tax"</span><span class="ss">:"VAT"</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="n">null</span>
<span class="p">}</span>
</code></pre>
<p>Updates the specified item by setting the values of the parameters passed. Any parameters not provided will be left unchanged.
This request accepts mostly the same arguments as the item creation call.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>unit_extratax_amount</strong><br/><span class="details">optional</span></td>
      <td><p>The unit price of the item without tax.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>currency</strong><br/><span class="details">optional</span></td>
      <td><p>3-letter <a href="http://www.xe.com/iso4217.php#section2" target="_blank">ISO code for currency</a>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>quantity</strong><br/><span class="details">optional, default is 1</span></td>
      <td><p>A positive integer representing the number of instances of the item.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>description</strong><br/><span class="details">optional</span></td>
      <td><p>Item&rsquo;s description.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the item object if the update succeeded. Returns an error if update parameters are invalid.</p>
<h2 id='list-all-items'>List all items</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/transactions/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>/items/
GET https://apiv2.octobat.com/invoices/<span class="o">{</span>INVOICE_ID<span class="o">}</span>/items/
GET https://apiv2.octobat.com/credit_notes/<span class="o">{</span>CREDIT_NOTE_ID<span class="o">}</span>/items/

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/transactions/oc_txn_1459936947icq9005f4668/items <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"object"</span>: <span class="s2">"list"</span>,
  <span class="s2">"has_before"</span>: <span class="nb">false</span>,
  <span class="s2">"has_more"</span>: <span class="nb">false</span>,
  <span class="s2">"total_count"</span>: 3,
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: <span class="s2">"oc_it_1460568443g3wu6b48fc3e"</span>,
      <span class="s2">"object"</span>: <span class="s2">"item"</span>,
      <span class="s2">"status"</span>: <span class="s2">"draft"</span>,
      <span class="s2">"confirmed_on"</span>: null,
      <span class="s2">"transaction"</span>: <span class="s2">"oc_txn_14605672518yko2fd30d23"</span>,
      <span class="s2">"invoice"</span>: null,
      <span class="s2">"credit_note"</span>: null,
      <span class="s2">"tax_evidence"</span>: <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span>,
      <span class="s2">"product_type"</span>: <span class="s2">"eservice"</span>,
      <span class="s2">"sale_mode"</span>: <span class="s2">"B2C"</span>,
      <span class="s2">"discountable"</span>:true,
      <span class="s2">"description"</span>: <span class="s2">"Entreprise Plan"</span>,
      <span class="s2">"unit_extratax_amount"</span>: 19900,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"quantity"</span>: 1,
      <span class="s2">"extratax_amount"</span>: 19900,
      <span class="s2">"tax_rate"</span>: 22.0,
      <span class="s2">"tax_amount"</span>: 4378,
      <span class="s2">"gross_amount"</span>: 24278,
      <span class="s2">"declare_in_region"</span>: <span class="s2">"IT"</span>,
      <span class="s2">"tax"</span>: <span class="s2">"VAT"</span>,
      <span class="s2">"sources"</span>: <span class="o">[]</span>,
      <span class="s2">"item_exchange"</span>: <span class="o">{</span>
        <span class="s2">"exchange_rate"</span>: 0.8864,
        <span class="s2">"exchange_date"</span>: <span class="s2">"2016-04-13T17:27:24.228Z"</span>,
        <span class="s2">"exchanged_to_currency"</span>: <span class="s2">"EUR"</span>
      <span class="o">}</span>,
      <span class="s2">"item_workspace_currency_exchange"</span>: <span class="o">{</span>
        <span class="s2">"exchange_rate"</span>: 0.9526,
        <span class="s2">"exchange_date"</span>: <span class="s2">"2016-04-11T17:27:24.228Z"</span>,
        <span class="s2">"exchanged_to_currency"</span>: <span class="s2">"GBP"</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">transaction</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">TRANSACTION_ID</span><span class="p">})</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">all</span>
<span class="c1"># or</span>
<span class="n">invoice</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">INVOICE_ID</span><span class="p">})</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">all</span>
<span class="c1"># or</span>
<span class="n">credit_note</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">CreditNote</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">CREDIT_NOTE_ID</span><span class="p">})</span>
<span class="n">credit_note</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">transaction</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_txn_14605672518yko2fd30d23"</span><span class="p">)</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::ListObject:0x3fe634d74498&gt; JSON: {</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
  <span class="s2">"has_before"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"has_more"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"total_count"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">#&lt;Octobat::Item id=oc_it_1460568443g3wu6b48fc3e 0x00000a&gt; JSON: {</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_it_1460568443g3wu6b48fc3e"</span><span class="p">,</span>
      <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"item"</span><span class="p">,</span>
      <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"draft"</span><span class="p">,</span>
      <span class="s2">"confirmed_on"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"transaction"</span><span class="p">:</span> <span class="s2">"oc_txn_14605672518yko2fd30d23"</span><span class="p">,</span>
      <span class="s2">"invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"tax_evidence"</span><span class="p">:</span> <span class="s2">"oc_tev_1460565379am3be8f5ef71"</span><span class="p">,</span>
      <span class="s2">"product_type"</span><span class="p">:</span> <span class="s2">"eservice"</span><span class="p">,</span>
      <span class="s2">"sale_mode"</span><span class="p">:</span> <span class="s2">"B2C"</span><span class="p">,</span>
      <span class="s2">"discountable"</span><span class="ss">:true</span><span class="p">,</span>
      <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Entreprise Plan"</span><span class="p">,</span>
      <span class="s2">"unit_extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
      <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
      <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">"extratax_amount"</span><span class="p">:</span> <span class="mi">19900</span><span class="p">,</span>
      <span class="s2">"tax_rate"</span><span class="p">:</span> <span class="mi">22</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"tax_amount"</span><span class="p">:</span> <span class="mi">4378</span><span class="p">,</span>
      <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">24278</span><span class="p">,</span>
      <span class="s2">"declare_in_region"</span><span class="p">:</span> <span class="s2">"IT"</span><span class="p">,</span>
      <span class="s2">"tax"</span><span class="p">:</span> <span class="s2">"VAT"</span><span class="p">,</span>
      <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[],</span>
      <span class="s2">"item_exchange"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"exchange_rate"</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">8864</span><span class="p">,</span>
        <span class="s2">"exchange_date"</span><span class="p">:</span> <span class="s2">"2016-04-13T17:27:24.228Z"</span><span class="p">,</span>
        <span class="s2">"exchanged_to_currency"</span><span class="p">:</span> <span class="s2">"EUR"</span>
      <span class="p">},</span>
      <span class="s2">"item_workspace_currency_exchange"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"exchange_rate"</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">9526</span><span class="p">,</span>
        <span class="s2">"exchange_date"</span><span class="p">:</span> <span class="s2">"2016-04-11T17:27:24.228Z"</span><span class="p">,</span>
        <span class="s2">"exchanged_to_currency"</span><span class="p">:</span> <span class="s2">"GBP"</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">#&lt;Octobat::Item[...] ...&gt;,</span>
    <span class="c1">#&lt;Octobat::Item[...] ...&gt;</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<p>Returns a list of items.</p>
<h3 id='returns'>Returns</h3>
<p>A hash with a data property that contains an array of items. Each entry in the array is a separate item object. If no items are available, the resulting array will be empty. This request should never raise an error.</p>

          <h1 id='transactions'>Transactions</h1>
<p>This is a transaction. It triggers when there is a payment or a refund.</p>
<h2 id='the-transaction-object'>The transaction object</h2>
<blockquote>
<p>Example object</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_txn_1459936947icq9005f4668"</span>,
  <span class="s2">"object"</span>: <span class="s2">"transaction"</span>,
  <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"payment_source"</span>: <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span>,
  <span class="s2">"payment_recipient"</span>: <span class="s2">"oc_pr_14597887132yzs440d46e9"</span>,
  <span class="s2">"invoice"</span>: null,
  <span class="s2">"credit_note"</span>: null,
  <span class="s2">"livemode"</span>: <span class="nb">true</span>,
  <span class="s2">"status"</span>: <span class="s2">"succeeded"</span>,
  <span class="s2">"transaction_date"</span>: <span class="s2">"2016-03-31T00:00:00.000Z"</span>,
  <span class="s2">"flow_type"</span>: <span class="s2">"payment"</span>,
  <span class="s2">"amount"</span>: 2500,
  <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="p">{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_txn_1459936947icq9005f4668"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"transaction"</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"payment_source"</span><span class="p">:</span> <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span>
  <span class="s2">"payment_recipient"</span><span class="p">:</span> <span class="s2">"oc_pr_14597887132yzs440d46e9"</span><span class="p">,</span>
  <span class="s2">"invoice"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"succeeded"</span><span class="p">,</span>
  <span class="s2">"transaction_date"</span><span class="p">:</span> <span class="s2">"2016-03-31T00:00:00.000Z"</span><span class="p">,</span>
  <span class="s2">"flow_type"</span><span class="p">:</span> <span class="s2">"payment"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">2500</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</code></pre><h3 id='attributes'>Attributes</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>id</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>object</strong><br/><span class="details">string, value is &ldquo;<strong>transaction</strong>&rdquo;</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer</strong><br/><span class="details">string</span></td>
      <td><p>ID of the customer.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_source</strong><br/><span class="details">string</span></td>
      <td><p>ID of the payment source.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_recipient</strong><br/><span class="details">string</span></td>
      <td><p>ID of the payment recipient.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice</strong><br/><span class="details">string</span></td>
      <td><p>ID of the invoice if one exists.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>credit_note</strong><br/><span class="details">string</span></td>
      <td><p>ID of the credit note if one exists.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>livemode</strong><br/><span class="details">boolean</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>status</strong><br/><span class="details">string</span></td>
      <td><p>The status of the transaction is either <code>succeeded</code>, <code>pending</code>, or <code>failed</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>transaction_date</strong><br/><span class="details">string</span></td>
      <td><p>Date on which the transaction was created.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>flow_type</strong><br/><span class="details">string</span></td>
      <td><p>The type of the transaction is either <code>payment</code> or <code>refund</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>amount</strong><br/><span class="details">integer</span></td>
      <td><p>The total amount that the customer has paid.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>sources</strong><br/><span class="details">array</span></td>
      <td><p>References to the integration&rsquo;s objects this transaction has been created from.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>currency</strong><br/><span class="details">string</span></td>
      <td><p>Three-letter ISO code representing the currency of the transaction.</p></td>
    </tr>
  </tbody>
</table>
<h2 id='create-a-transaction'>Create a transaction</h2><pre class="highlight plaintext"><code># Definition
POST https://apiv2.octobat.com/transactions
</code></pre><pre class="highlight shell"><code><span class="c"># Example Request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/transactions <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nv">customer</span><span class="o">=</span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span> <span class="se">\</span>
   -d <span class="nv">payment_source</span><span class="o">=</span><span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span> <span class="se">\</span>
   -d <span class="nv">payment_recipient</span><span class="o">=</span><span class="s2">"oc_pr_14597887132yzs440d46e9"</span> <span class="se">\</span>
   -d <span class="nv">invoice</span><span class="o">=</span><span class="s2">"oc_in_14597887132yzs440der49"</span> <span class="se">\</span>
   -d <span class="nv">status</span><span class="o">=</span><span class="s2">"succeeded"</span> <span class="se">\</span>
   -d <span class="nv">flow_type</span><span class="o">=</span><span class="s2">"payment"</span> <span class="se">\</span>
   -d <span class="nv">amount</span><span class="o">=</span>2500 <span class="se">\</span>
   -d <span class="nv">currency</span><span class="o">=</span><span class="s2">"EUR"</span>

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_txn_1459936947icq9005f4668"</span>,
  <span class="s2">"object"</span>: <span class="s2">"transaction"</span>,
  <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"payment_source"</span>: <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span>,
  <span class="s2">"payment_recipient"</span>: <span class="s2">"oc_pr_14597887132yzs440d46e9"</span>,
  <span class="s2">"invoice"</span>: <span class="s2">"oc_in_14597887132yzs440der49"</span>,
  <span class="s2">"credit_note"</span>: nil,
  <span class="s2">"livemode"</span>: <span class="nb">true</span>,
  <span class="s2">"status"</span>: <span class="s2">"succeeded"</span>,
  <span class="s2">"transaction_date"</span>: <span class="s2">"2016-03-31T00:00:00.000Z"</span>,
  <span class="s2">"flow_type"</span>: <span class="s2">"payment"</span>,
  <span class="s2">"amount"</span>: 2500,
  <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span>
  <span class="ss">customer: </span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="ss">payment_source: </span><span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span>
  <span class="ss">payment_recipient: </span><span class="s2">"oc_pr_14597887132yzs440d46e9"</span><span class="p">,</span>
  <span class="ss">invoice: </span><span class="s2">"oc_in_14597887132yzs440der49"</span><span class="p">,</span>
  <span class="ss">status: </span><span class="s2">"succeeded"</span><span class="p">,</span>
  <span class="ss">flow_type: </span><span class="s2">"payment"</span><span class="p">,</span>
  <span class="ss">amount: </span><span class="mi">2500</span><span class="p">,</span>
  <span class="ss">currency: </span><span class="s1">'EUR'</span>
<span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Transaction id=oc_txn_1459936947icq9005f4668 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_txn_1459936947icq9005f4668"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"transaction"</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"payment_source"</span><span class="p">:</span> <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span>
  <span class="s2">"payment_recipient"</span><span class="p">:</span> <span class="s2">"oc_pr_14597887132yzs440d46e9"</span><span class="p">,</span>
  <span class="s2">"invoice"</span><span class="p">:</span> <span class="s2">"oc_in_14597887132yzs440der49"</span><span class="p">,</span>
  <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"succeeded"</span><span class="p">,</span>
  <span class="s2">"transaction_date"</span><span class="p">:</span> <span class="s2">"2016-03-31T00:00:00.000Z"</span><span class="p">,</span>
  <span class="s2">"flow_type"</span><span class="p">:</span> <span class="s2">"payment"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">2500</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</code></pre><h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>customer</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The ID of an existing customer that will be charged in this request.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_source</strong><br/><span class="details">optional, default is <strong>nil</strong></span></td>
      <td><p>The ID of an existing payment source.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_recipient</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The ID of an existing payment recipient.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>invoice</strong><br/><span class="details">optional, default is <strong>nil</strong></span></td>
      <td><p>The ID of an existing invoice.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>credit_note</strong><br/><span class="details">optional, default is <strong>nil</strong></span></td>
      <td><p>The ID of an existing credit note.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>status</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The status of the transaction is either <code>succeeded</code> or <code>failed</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>transaction_date</strong><br/><span class="details">optional, default is <strong>current datetime</strong></span></td>
      <td><p>Date on which the transaction was created.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>flow_type</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The type of the transaction is either <code>payment</code> or <code>refund</code>.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>amount</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The total amount that the customer has paid.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>currency</strong><br/><span class="badge-warning">required</span></td>
      <td><p>Three-letter ISO code representing the currency of the transaction.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the transaction object if the creation succeeds. Returns an error if parameters are invalid</p>
<h2 id='retrieve-a-transaction'>Retrieve a transaction</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/transactions/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>

<span class="c"># Example Request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/transactions/oc_txn_1459957855kw89e9c7e960 <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_txn_1459957855kw89e9c7e960"</span>,
  <span class="s2">"object"</span>: <span class="s2">"transaction"</span>,
  <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"payment_source"</span>: <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span>,
  <span class="s2">"payment_recipient"</span>: <span class="s2">"oc_pr_14597887132yzs440d46e9"</span>,
  <span class="s2">"invoice"</span>: <span class="s2">"oc_in_14597887132yzs440der49"</span>,
  <span class="s2">"credit_note"</span>: nil,
  <span class="s2">"livemode"</span>: <span class="nb">true</span>,
  <span class="s2">"status"</span>: <span class="s2">"succeeded"</span>,
  <span class="s2">"transaction_date"</span>: <span class="s2">"2016-03-31T00:00:00.000Z"</span>,
  <span class="s2">"flow_type"</span>: <span class="s2">"payment"</span>,
  <span class="s2">"amount"</span>: 2500,
  <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
  <span class="s2">"sources"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="no">Octobat</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">TRANSACTION_ID</span><span class="p">})</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_txn_1459957855kw89e9c7e960"</span><span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::Transaction id=oc_txn_1459957855kw89e9c7e960 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_txn_1459957855kw89e9c7e960"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"transaction"</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"payment_source"</span><span class="p">:</span> <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span>
  <span class="s2">"payment_recipient"</span><span class="p">:</span> <span class="s2">"oc_pr_14597887132yzs440d46e9"</span><span class="p">,</span>
  <span class="s2">"invoice"</span><span class="p">:</span> <span class="s2">"oc_in_14597887132yzs440der49"</span><span class="p">,</span>
  <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
  <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"succeeded"</span><span class="p">,</span>
  <span class="s2">"transaction_date"</span><span class="p">:</span> <span class="s2">"2016-03-31T00:00:00.000Z"</span><span class="p">,</span>
  <span class="s2">"flow_type"</span><span class="p">:</span> <span class="s2">"payment"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">2500</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
  <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</code></pre>
<p>Retrieves the details of an existing transaction.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>transaction</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The identifier of the transaction to be retrieved.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns a transaction object if a valid identifier was provided.</p>
<h2 id='list-all-transactions'>List all transactions</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/transactions/

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/transactions <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"object"</span>: <span class="s2">"list"</span>,
  <span class="s2">"has_before"</span>: <span class="nb">false</span>,
  <span class="s2">"has_more"</span>: <span class="nb">false</span>,
  <span class="s2">"total_count"</span>: 3,
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: <span class="s2">"oc_txn_1459957855kw89e9c7e960"</span>,
      <span class="s2">"object"</span>: <span class="s2">"transaction"</span>,
      <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
      <span class="s2">"payment_source"</span>: <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span>,
      <span class="s2">"payment_recipient"</span>: <span class="s2">"oc_pr_14597887132yzs440d46e9"</span>,
      <span class="s2">"invoice"</span>: <span class="s2">"oc_in_14597887132yzs440der49"</span>,
      <span class="s2">"credit_note"</span>: nil,
      <span class="s2">"livemode"</span>: <span class="nb">true</span>,
      <span class="s2">"status"</span>: <span class="s2">"succeeded"</span>,
      <span class="s2">"transaction_date"</span>: <span class="s2">"2016-03-31T00:00:00.000Z"</span>,
      <span class="s2">"flow_type"</span>: <span class="s2">"payment"</span>,
      <span class="s2">"amount"</span>: 1500,
      <span class="s2">"currency"</span>: <span class="s2">"EUR"</span>,
      <span class="s2">"sources"</span>: <span class="o">[]</span>
    <span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="no">Octobat</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::ListObject:0x3fe634d74498&gt; JSON: {</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
  <span class="s2">"has_before"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"has_more"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"total_count"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">#&lt;Octobat::Transaction id=oc_txn_1459957855kw89e9c7e960 0x00000a&gt; JSON: {</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_txn_1459957855kw89e9c7e960"</span><span class="p">,</span>
      <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"transaction"</span><span class="p">,</span>
      <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
      <span class="s2">"payment_source"</span><span class="p">:</span> <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span>
      <span class="s2">"payment_recipient"</span><span class="p">:</span> <span class="s2">"oc_pr_14597887132yzs440d46e9"</span><span class="p">,</span>
      <span class="s2">"invoice"</span><span class="p">:</span> <span class="s2">"oc_in_14597887132yzs440der49"</span><span class="p">,</span>
      <span class="s2">"credit_note"</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
      <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
      <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"succeeded"</span><span class="p">,</span>
      <span class="s2">"transaction_date"</span><span class="p">:</span> <span class="s2">"2016-03-31T00:00:00.000Z"</span><span class="p">,</span>
      <span class="s2">"flow_type"</span><span class="p">:</span> <span class="s2">"payment"</span><span class="p">,</span>
      <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">1500</span><span class="p">,</span>
      <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"EUR"</span><span class="p">,</span>
      <span class="s2">"sources"</span><span class="p">:</span> <span class="p">[]</span>
    <span class="p">},</span>
    <span class="c1">#&lt;Octobat::Transaction[...] ...&gt;,</span>
    <span class="c1">#&lt;Octobat::Transaction[...] ...&gt;</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<p>Returns a list of transactions.</p>
<h3 id='returns'>Returns</h3>
<p>A hash with a data property that contains an array of transactions. Each entry in the array is a separate transaction object. If no transactions are available, the resulting array will be empty. This request should never raise an error.</p>

          <h1 id='payment-recipients'>Payment recipients</h1><h2 id='the-payment-recipient-object'>The payment recipient object</h2>
<blockquote>
<p>Example object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_pr_14597887132yzs440d46e9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment_recipient"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"livemode"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transfer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"iban"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FR90 17216 18009 17038133245 88"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='attributes'>Attributes</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>id</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>object</strong><br/><span class="details">string, value is &ldquo;<strong>payment_recipient</strong>&rdquo;</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>livemode</strong><br/><span class="details">boolean</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>name</strong><br/><span class="details">string</span></td>
      <td><p>Name or description of the payment recipient.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>details</strong><br/><span class="details">json</span></td>
      <td><p>Details addressed to the customer, to recieve the payment (IBAN, check recipient&hellip;).</p></td>
    </tr>
  </tbody>
</table>
<h2 id='listing-payment-recipients'>Listing payment recipients</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/payment_recipients/

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/payment_recipients <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"object"</span>: <span class="s2">"list"</span>,
  <span class="s2">"has_before"</span>: <span class="nb">false</span>,
  <span class="s2">"has_more"</span>: <span class="nb">false</span>,
  <span class="s2">"total_count"</span>: 3,
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: <span class="s2">"oc_pr_14597887132yzs440d46e9"</span>,
      <span class="s2">"object"</span>: <span class="s2">"payment_recipient"</span>,
      <span class="s2">"livemode"</span>: <span class="nb">true</span>,
      <span class="s2">"name"</span>: <span class="s2">"Transfer"</span>,
      <span class="s2">"details"</span>: <span class="o">{</span>
        <span class="s2">"iban"</span>: <span class="s2">"FR90 17216 18009 17038133245 88"</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="no">Octobat</span><span class="o">::</span><span class="no">PaymentRecipient</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">PaymentRecipient</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::ListObject:0x3fe634d74498&gt; JSON: {</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
  <span class="s2">"has_before"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"has_more"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"total_count"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">#&lt;Octobat::PaymentRecipient id=oc_pr_14597887132yzs440d46e9 0x00000a&gt; JSON: {</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_pr_14597887132yzs440d46e9"</span><span class="p">,</span>
      <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"payment_recipient"</span><span class="p">,</span>
      <span class="s2">"livemode"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Transfer"</span><span class="p">,</span>
      <span class="s2">"details"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"iban"</span><span class="p">:</span> <span class="s2">"FR90 17216 18009 17038133245 88"</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">#&lt;Octobat::PaymentRecipient[...] ...&gt;,</span>
    <span class="c1">#&lt;Octobat::PaymentRecipient[...] ...&gt;</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<p>Returns a list of payment recipients.</p>
<h3 id='returns'>Returns</h3>
<p>A hash with a data property that contains an array of payment recipients. Each entry in the array is a separate numbering payment recipient. If no payment recipients are available, the resulting array will be empty. This request should never raise an error.</p>

          <h1 id='payment-sources'>Payment sources</h1>
<p>This is the payment source of a transaction.</p>
<h2 id='the-payment-source-object'>The payment source object</h2>
<blockquote>
<p>Example object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment_source"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_1029383qsfqs"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_source_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Credit Card"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"exp_month"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
  </span><span class="s2">"exp_year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2017</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='attributes'>Attributes</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>id</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>object</strong><br/><span class="details">string, value is &ldquo;<strong>payment_source</strong>&rdquo;</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>customer</strong><br/><span class="details">string</span></td>
      <td><p>ID of the customer.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>source</strong><br/><span class="details">string</span></td>
      <td><p>Source.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_source_type</strong><br/><span class="details">string</span></td>
      <td><p>Type of the payment can be <code>Credit Card</code>, <code>Transfer</code>, or <code>Check</code> or another value.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>details</strong><br/><span class="details">json</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>country</strong><br/><span class="details">string</span></td>
      <td><p>Two-letter ISO code representing the country of the payment source.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>exp_month</strong><br/><span class="details">integer</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>exp_year</strong><br/><span class="details">integer</span></td>
      <td><p>-</p></td>
    </tr>
  </tbody>
</table>
<h2 id='create-a-payment-source'>Create a payment source</h2><pre class="highlight plaintext"><code># Definition
POST https://apiv2.octobat.com/customers/{CUSTOMER_ID}/payment_sources
</code></pre><pre class="highlight shell"><code><span class="c"># Example Request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/payment_sources <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt: <span class="se">\</span>
   -d <span class="nb">source</span><span class="o">=</span><span class="s2">"card_1029383qsfqs"</span> <span class="se">\</span>
   -d <span class="nv">payment_source_type</span><span class="o">=</span><span class="s2">"Credit Card"</span> <span class="se">\</span>
   -d <span class="nv">details</span><span class="o">={}</span> <span class="se">\</span>
   -d <span class="nv">country</span><span class="o">=</span><span class="s2">"FR"</span> <span class="se">\</span>
   -d <span class="nv">exp_month</span><span class="o">=</span>12 <span class="se">\</span>
   -d <span class="nv">exp_year</span><span class="o">=</span>2017

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span>,
  <span class="s2">"object"</span>: <span class="s2">"payment_source"</span>,
  <span class="s2">"customer"</span>: <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"source"</span>: <span class="s2">"card_1029383qsfqs"</span>,
  <span class="s2">"payment_source_type"</span>: <span class="s2">"Credit Card"</span>,
  <span class="s2">"details"</span>: <span class="o">{}</span>,
  <span class="s2">"country"</span>: <span class="s2">"FR"</span>,
  <span class="s2">"exp_month"</span>: 12,
  <span class="s2">"exp_year"</span>: 2017
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">customer</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">)</span>
<span class="n">customer</span><span class="p">.</span><span class="nf">payment_sources</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span>
  <span class="ss">source: </span><span class="s2">"card_1029383qsfqs"</span><span class="p">,</span>
  <span class="ss">payment_source_type: </span><span class="s2">"Credit Card"</span><span class="p">,</span>
  <span class="ss">details: </span><span class="p">{},</span>
  <span class="ss">country: </span><span class="s2">"FR"</span><span class="p">,</span>
  <span class="ss">exp_month: </span><span class="mi">12</span><span class="p">,</span>
  <span class="ss">exp_year: </span><span class="mi">2017</span>
<span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::PaymentSource id=oc_ps_1459584112d83k4ef3e3bd 0x00000a&gt; JSON: {</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"payment_source"</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
  <span class="s2">"source"</span><span class="p">:</span> <span class="s2">"card_1029383qsfqs"</span><span class="p">,</span>
  <span class="s2">"payment_source_type"</span><span class="p">:</span> <span class="s2">"Credit Card"</span><span class="p">,</span>
  <span class="s2">"details"</span><span class="p">:</span> <span class="p">{},</span>
  <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
  <span class="s2">"exp_month"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
  <span class="s2">"exp_year"</span><span class="p">:</span> <span class="mi">2017</span>
<span class="p">}</span>
</code></pre><h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>source</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>payment_source_type</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>details</strong><br/><span class="details">optional</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>country</strong><br/><span class="details">optional</span></td>
      <td><p>Two-letter ISO code representing the payment source&rsquo;s country of the customer.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>exp_month</strong><br/><span class="details">optional, default is <strong>nil</strong></span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>exp_year</strong><br/><span class="details">optional, default is <strong>nil</strong></span></td>
      <td><p>-</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns the payment source object if the creation succeeds. Returns an error if parameters are invalid</p>
<h2 id='retrieve-an-existing-payment-source'>Retrieve an existing payment source</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/payment_sources/<span class="o">{</span>PAYMENT_SOURCE_ID<span class="o">}</span>

<span class="c"># Example Request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/customers/oc_cu_1421878635hksc26e4de79/payment_sources/oc_ps_1459584051gau52bfe848c <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"oc_ps_1459584051gau52bfe848c"</span>,
  <span class="s2">"object"</span> : <span class="s2">"payment_source"</span>,
  <span class="s2">"customer"</span> : <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
  <span class="s2">"source"</span>: <span class="s2">"card_1029383qsfqs"</span>,
  <span class="s2">"payment_source_type"</span>: <span class="s2">"Credit Card"</span>,
  <span class="s2">"details"</span>: <span class="o">{}</span>,
  <span class="s2">"country"</span>: FR,
  <span class="s2">"exp_month"</span>: 12,
  <span class="s2">"exp_year"</span>: 2017
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">customer</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">CUSTOMER_ID</span><span class="p">})</span>
<span class="n">payment_source</span> <span class="o">=</span> <span class="n">customer</span><span class="p">.</span><span class="nf">payment_sources</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">PAYMENT_SOURCE_ID</span><span class="p">})</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">customer</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_cu_1421878635hksc26e4de79"</span><span class="p">)</span>
<span class="n">customer</span><span class="p">.</span><span class="nf">payment_sources</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">)</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::PaymentSource id=oc_ps_1459584112d83k4ef3e3bd 0x00000a&gt; JSON: {</span>
 <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span>
 <span class="s2">"object"</span> <span class="p">:</span> <span class="s2">"payment_source"</span><span class="p">,</span>
 <span class="s2">"customer"</span> <span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
 <span class="s2">"source"</span><span class="p">:</span> <span class="s2">"card_1029383qsfqs"</span><span class="p">,</span>
 <span class="s2">"payment_source_type"</span><span class="p">:</span> <span class="s2">"Credit Card"</span><span class="p">,</span>
 <span class="s2">"details"</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s2">"country"</span><span class="p">:</span> <span class="no">FR</span><span class="p">,</span>
 <span class="s2">"exp_month"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
 <span class="s2">"exp_year"</span><span class="p">:</span> <span class="mi">2017</span>
<span class="p">}</span>
</code></pre>
<p>Retrieves the details of an existing payment source. You need only supply the unique payment source identifier that was returned upon payment source creation.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>id</strong><br/><span class="badge-warning">required</span></td>
      <td><p>The identifier of the payment source to be retrieved.</p></td>
    </tr>
  </tbody>
</table>
<h3 id='returns'>Returns</h3>
<p>Returns a payment source object if a valid identifier was provided.</p>
<h2 id='list-all-payment-sources'>List all payment sources</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/payment_sources/

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/customers/oc_cu_1459413729au6o6a9ae061/payment_sources <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"object"</span>: <span class="s2">"list"</span>,
  <span class="s2">"has_before"</span>: <span class="nb">false</span>,
  <span class="s2">"has_more"</span>: <span class="nb">false</span>,
  <span class="s2">"total_count"</span>: 3,
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span>,
      <span class="s2">"object"</span> : <span class="s2">"payment_source"</span>,
      <span class="s2">"customer"</span> : <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span>,
      <span class="s2">"source"</span>: <span class="s2">"card_1029383qsfqs"</span>,
      <span class="s2">"payment_source_type"</span>: <span class="s2">"Credit Card"</span>,
      <span class="s2">"details"</span>: <span class="o">{}</span>,
      <span class="s2">"country"</span>: <span class="s2">"FR"</span>,
      <span class="s2">"exp_month"</span>: 12,
      <span class="s2">"exp_year"</span>: 2017
    <span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="n">customer</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">({</span><span class="no">CUSTOMER_ID</span><span class="p">})</span>
<span class="n">customer</span><span class="p">.</span><span class="nf">payment_sources</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="n">customer</span> <span class="o">=</span> <span class="no">Octobat</span><span class="o">::</span><span class="no">Customer</span><span class="p">.</span><span class="nf">retrieve</span><span class="p">(</span><span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">)</span>
<span class="n">customer</span><span class="p">.</span><span class="nf">payment_sources</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::ListObject:0x3fe634d74498&gt; JSON: {</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
  <span class="s2">"has_before"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"has_more"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"total_count"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">#&lt;Octobat::PaymentSource id=oc_ps_1459584112d83k4ef3e3bd 0x00000a&gt; JSON: {</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_ps_1459584112d83k4ef3e3bd"</span><span class="p">,</span>
      <span class="s2">"object"</span> <span class="p">:</span> <span class="s2">"payment_source"</span><span class="p">,</span>
      <span class="s2">"customer"</span> <span class="p">:</span> <span class="s2">"oc_cu_1459413729au6o6a9ae061"</span><span class="p">,</span>
      <span class="s2">"source"</span><span class="p">:</span> <span class="s2">"card_1029383qsfqs"</span><span class="p">,</span>
      <span class="s2">"payment_source_type"</span><span class="p">:</span> <span class="s2">"Credit Card"</span><span class="p">,</span>
      <span class="s2">"details"</span><span class="p">:</span> <span class="p">{},</span>
      <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
      <span class="s2">"exp_month"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
      <span class="s2">"exp_year"</span><span class="p">:</span> <span class="mi">2017</span>
    <span class="p">},</span>
    <span class="c1">#&lt;Octobat::PaymentSource[...] ...&gt;,</span>
    <span class="c1">#&lt;Octobat::PaymentSource[...] ...&gt;</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<p>Returns a list of customer&rsquo;s payment sources.</p>
<h3 id='returns'>Returns</h3>
<p>A hash with a data property that contains an array of payment sources. Each entry in the array is a separate payment source object. If no payment sources are available, the resulting array will be empty. This request should never raise an error.</p>

          <h1 id='invoice-numbering-sequences'>Invoice Numbering sequences</h1><h2 id='the-invoice-numbering-sequence-object'>The invoice numbering sequence object</h2>
<blockquote>
<p>Example object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_ns_146192091741t5175c8c47"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invoice_numbering_sequence"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"prefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AAA-"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"next_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AAA-1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='attributes'>Attributes</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>id</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>object</strong><br/><span class="details">string, value is &ldquo;<strong>invoice_numbering_sequence</strong>&rdquo;</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>prefix</strong><br/><span class="details">string</span></td>
      <td><p>The prefix of each invoice number in this sequence.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>is_default</strong><br/><span class="details">string</span></td>
      <td><p>Only one numbering sequence can be the default one, which is selected if no numbering sequence is chosen during invoice creation.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>next_number</strong><br/><span class="details">string</span></td>
      <td><p>The next invoice number that will be generated within this sequence.</p></td>
    </tr>
  </tbody>
</table>
<h2 id='listing-invoice-numbering-sequences'>Listing invoice numbering sequences</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/invoice_numbering_sequences/

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/invoice_numbering_sequences <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"object"</span>: <span class="s2">"list"</span>,
  <span class="s2">"has_more"</span>: <span class="nb">false</span>,
  <span class="s2">"total_count"</span>: 3,
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: <span class="s2">"oc_ns_146192091741t5175c8c47"</span>,
      <span class="s2">"object"</span>: <span class="s2">"invoice_numbering_sequence"</span>,
      <span class="s2">"prefix"</span>: <span class="s2">"AAA-"</span>,
      <span class="s2">"is_default"</span>: <span class="nb">true</span>,
      <span class="s2">"next_number"</span>: <span class="s2">"AAA-1"</span>
    <span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="no">Octobat</span><span class="o">::</span><span class="no">InvoiceNumberingSequence</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">InvoiceNumberingSequence</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::ListObject:0x3fe634d74498&gt; JSON: {</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
  <span class="s2">"has_more"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"total_count"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">#&lt;Octobat::InvoiceNumberingSequence id=oc_ns_146192091741t5175c8c47 0x00000a&gt; JSON: {</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_ns_146192091741t5175c8c47"</span><span class="p">,</span>
      <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"invoice_numbering_sequence"</span><span class="p">,</span>
      <span class="s2">"prefix"</span><span class="p">:</span> <span class="s2">"AAA-"</span><span class="p">,</span>
      <span class="s2">"is_default"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
      <span class="s2">"next_number"</span><span class="p">:</span> <span class="s2">"AAA-1"</span>
    <span class="p">},</span>
    <span class="c1">#&lt;Octobat::InvoiceNumberingSequence[...] ...&gt;,</span>
    <span class="c1">#&lt;Octobat::InvoiceNumberingSequence[...] ...&gt;</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<p>Returns a list of invoice numbering sequences.</p>
<h3 id='returns'>Returns</h3>
<p>A hash with a data property that contains an array of invoice numbering sequences. Each entry in the array is a separate numbering sequence object. If no numbering sequence are available, the resulting array will be empty. This request should never raise an error.</p>

          <h1 id='credit-note-numbering-sequences'>Credit note Numbering sequences</h1><h2 id='the-credit-note-numbering-sequence-object'>The credit note numbering sequence object</h2>
<blockquote>
<p>Example object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oc_cns_1462279395ko79c927206e"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit_note_numbering_sequence"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"prefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CN-AAA-"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"next_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CN-AAA-1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='attributes'>Attributes</h3>
<table>
  <tbody>
    <tr class="first-row">
      <td class="attribute"><strong>id</strong><br/><span class="details">string</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>object</strong><br/><span class="details">string, value is &ldquo;<strong>credit_note_numbering_sequence</strong>&rdquo;</span></td>
      <td><p>-</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>prefix</strong><br/><span class="details">string</span></td>
      <td><p>The prefix of each credit note number in this sequence.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>is_default</strong><br/><span class="details">string</span></td>
      <td><p>Only one numbering sequence can be the default one, which is selected if no numbering sequence is chosen during credit note creation.</p></td>
    </tr>
    <tr>
      <td class="attribute"><strong>next_number</strong><br/><span class="details">string</span></td>
      <td><p>The next credit note number that will be generated within this sequence.</p></td>
    </tr>
  </tbody>
</table>
<h2 id='listing-credit-note-numbering-sequences'>Listing credit note numbering sequences</h2><pre class="highlight shell"><code><span class="c"># Definition</span>
GET https://apiv2.octobat.com/credit_note_numbering_sequences/

<span class="c"># Example request</span>
<span class="gp">$ </span>curl https://apiv2.octobat.com/credit_note_numbering_sequences <span class="se">\</span>
   -u oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt:

<span class="c"># Example response</span>
<span class="o">{</span>
  <span class="s2">"object"</span>: <span class="s2">"list"</span>,
  <span class="s2">"has_before"</span>: <span class="nb">false</span>,
  <span class="s2">"has_more"</span>: <span class="nb">false</span>,
  <span class="s2">"total_count"</span>: 3,
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: <span class="s2">"oc_cns_14622823144wil0b9768b2"</span>,
      <span class="s2">"object"</span>: <span class="s2">"credit_note_numbering_sequence"</span>,
      <span class="s2">"prefix"</span>: <span class="s2">"CN-AAA-"</span>,
      <span class="s2">"is_default"</span>: <span class="nb">true</span>,
      <span class="s2">"next_number"</span>: <span class="s2">"CN-AAA-1"</span>
    <span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>,
    <span class="o">{</span>...<span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby"><code><span class="c1"># Definition</span>
<span class="no">Octobat</span><span class="o">::</span><span class="no">CreditNoteNumberingSequence</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example request</span>
<span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s2">"octobat"</span>
<span class="no">Octobat</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"oc_test_skey_tkHCYYOUVrYyY5rBFZxNzgtt"</span>

<span class="no">Octobat</span><span class="o">::</span><span class="no">CreditNoteNumberingSequence</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Example response</span>
<span class="c1">#&lt;Octobat::ListObject:0x3fe634d74498&gt; JSON: {</span>
  <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">,</span>
  <span class="s2">"has_before"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"has_more"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"total_count"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">#&lt;Octobat::CreditNoteNumberingSequence id=oc_cns_14622823144wil0b9768b2 0x00000a&gt; JSON: {</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"oc_cns_14622823144wil0b9768b2"</span><span class="p">,</span>
      <span class="s2">"object"</span><span class="p">:</span> <span class="s2">"credit_note_numbering_sequence"</span><span class="p">,</span>
      <span class="s2">"prefix"</span><span class="p">:</span> <span class="s2">"CN-AAA-"</span><span class="p">,</span>
      <span class="s2">"is_default"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
      <span class="s2">"next_number"</span><span class="p">:</span> <span class="s2">"CN-AAA-1"</span>
    <span class="p">},</span>
    <span class="c1">#&lt;Octobat::CreditNoteNumberingSequence[...] ...&gt;,</span>
    <span class="c1">#&lt;Octobat::CreditNoteNumberingSequence[...] ...&gt;</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<p>Returns a list of credit note numbering sequences.</p>
<h3 id='returns'>Returns</h3>
<p>A hash with a data property that contains an array of credit note numbering sequences. Each entry in the array is a separate numbering sequence object. If no numbering sequence are available, the resulting array will be empty. This request should never raise an error.</p>

      </div>
      <div class="dark-box"></div>
    </div>
  </body>
</html>
